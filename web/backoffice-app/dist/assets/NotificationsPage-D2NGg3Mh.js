import{T as F,r as y,j as e,V as b,L as S,B as m}from"./index-CCoXuS_m.js";import{u as L,S as C,C as R,a as E,T as H,I as z}from"./hooks-CVliGVvY.js";import{u as O}from"./hooks-Bj8GK6wO.js";import{S as B,a as I,b as k,c as A,d as n,B as N}from"./select-BZ45kTqf.js";import{T as U,a as X,b as j,c,d as _,e as a}from"./table-Dq4jZVvF.js";import{S as d}from"./skeleton-D-5V38zq.js";import"./useMutation-D4ruvC8T.js";const $={info:z,warning:H,success:E,error:R},q={info:"default",warning:"secondary",success:"default",error:"destructive"},G={info:"bg-blue-500",warning:"bg-yellow-500 text-white",success:"bg-green-500",error:""};function J(t){return new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}function te(){var w,T;const{t}=F("notifications"),[r,o]=y.useState(1),[u,M]=y.useState(""),[p,P]=y.useState(""),{data:i}=O({pageSize:100}),x={};u&&(x.type=u),p&&(x.tenantId=p);const{data:l,isLoading:V}=L({page:r,pageSize:20,sort:"-createdAt",...Object.keys(x).length>0?{filter:x}:{}}),v=(l==null?void 0:l.items)??[],g=(l==null?void 0:l.totalCount)??0,h=(l==null?void 0:l.totalPages)??1,D=new Map(((w=i==null?void 0:i.items)==null?void 0:w.map(s=>[s.id,s.name]))??[]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold tracking-tight flex items-center gap-2",children:[e.jsx(b,{className:"h-6 w-6"}),t("history.title")]}),e.jsx("p",{className:"text-muted-foreground",children:t("history.description")})]}),e.jsx(S,{to:"/notifications/send",children:e.jsxs(m,{children:[e.jsx(C,{className:"h-4 w-4 me-2"}),t("sendNotification")]})})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(B,{value:u,onValueChange:s=>{M(s==="all"?"":s),o(1)},children:[e.jsx(I,{className:"w-[180px]",children:e.jsx(k,{placeholder:t("history.filterByType")})}),e.jsxs(A,{children:[e.jsx(n,{value:"all",children:t("history.allTypes")}),e.jsx(n,{value:"info",children:t("types.info")}),e.jsx(n,{value:"warning",children:t("types.warning")}),e.jsx(n,{value:"success",children:t("types.success")}),e.jsx(n,{value:"error",children:t("types.error")})]})]}),e.jsxs(B,{value:p,onValueChange:s=>{P(s==="all"?"":s),o(1)},children:[e.jsx(I,{className:"w-[220px]",children:e.jsx(k,{placeholder:t("history.filterByTenant")})}),e.jsxs(A,{children:[e.jsx(n,{value:"all",children:t("history.allTenants")}),(T=i==null?void 0:i.items)==null?void 0:T.map(s=>e.jsx(n,{value:s.id,children:s.name},s.id))]})]}),e.jsx("div",{className:"ms-auto text-sm text-muted-foreground",children:g>0&&t("pagination.showing",{from:(r-1)*20+1,to:Math.min(r*20,g),total:g})})]}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(U,{children:[e.jsx(X,{children:e.jsxs(j,{children:[e.jsx(c,{children:t("fields.type")}),e.jsx(c,{children:t("fields.title")}),e.jsx(c,{children:t("fields.tenant")}),e.jsx(c,{children:t("fields.status")}),e.jsx(c,{children:t("fields.createdAt")})]})}),e.jsx(_,{children:V?Array.from({length:5}).map((s,f)=>e.jsxs(j,{children:[e.jsx(a,{children:e.jsx(d,{className:"h-5 w-16"})}),e.jsx(a,{children:e.jsx(d,{className:"h-5 w-48"})}),e.jsx(a,{children:e.jsx(d,{className:"h-5 w-24"})}),e.jsx(a,{children:e.jsx(d,{className:"h-5 w-16"})}),e.jsx(a,{children:e.jsx(d,{className:"h-5 w-32"})})]},f)):v.length===0?e.jsx(j,{children:e.jsx(a,{colSpan:5,className:"h-32 text-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(b,{className:"h-8 w-8 text-muted-foreground"}),e.jsx("p",{className:"font-medium",children:t("history.noNotifications")}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t("history.noNotificationsDescription")}),e.jsx(S,{to:"/notifications/send",children:e.jsxs(m,{variant:"outline",size:"sm",className:"mt-2",children:[e.jsx(C,{className:"h-4 w-4 me-2"}),t("sendNotification")]})})]})})}):v.map(s=>{const f=$[s.type]??z;return e.jsxs(j,{children:[e.jsx(a,{children:e.jsxs(N,{variant:q[s.type]??"outline",className:G[s.type]??"",children:[e.jsx(f,{className:"h-3 w-3 me-1"}),t(`types.${s.type}`)]})}),e.jsx(a,{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.title}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-1",children:s.body})]})}),e.jsx(a,{className:"text-muted-foreground",children:D.get(s.tenantId)??s.tenantId.slice(0,8)}),e.jsx(a,{children:s.isRead?e.jsx(N,{variant:"outline",children:t("history.read")}):e.jsx(N,{variant:"secondary",children:t("history.unread")})}),e.jsx(a,{className:"text-muted-foreground",children:J(s.createdAt)})]},s.id)})})]})}),h>1&&e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(m,{variant:"outline",size:"sm",onClick:()=>o(s=>Math.max(1,s-1)),disabled:r<=1,children:"Previous"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[r," / ",h]}),e.jsx(m,{variant:"outline",size:"sm",onClick:()=>o(s=>Math.min(h,s+1)),disabled:r>=h,children:"Next"})]})]})}export{te as NotificationsPage};
//# sourceMappingURL=NotificationsPage-D2NGg3Mh.js.map
