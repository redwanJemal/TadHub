import{c as Q,r as x,j as e,p as q,A as L,q as F,s as _,B as g,f as fe,e as M,t as ge,h as D,d as ve,k as pe,l as B,u as Ne,o as be,m as H,U as we}from"./index-DmWLXBqc.js";import{g as ye,h as Ce,d as Te,i as Ae,a as Me,b as Se,j as De,k as ke}from"./hooks-Cctshj5Z.js";import{I as Re,c as Ie,S as f}from"./skeleton-FuQFzEjM.js";import{D as Pe,a as Ee,b as Le,c as Fe,d as _e,e as Ue}from"./dialog-lQRpD5d5.js";import{S as Ve,C as Be,a as J,b as W,c as X,d as Y,e as b,w as $e,R as qe,I as He,x as Z,D as Oe,k as ze,E as Ge,l as Ke,m as k,n as Qe,B as A,T as Je,f as We,g as C,h as T,i as Xe,j as p,A as Ye,o as Ze,p as es,q as ss,r as as,s as ts,t as ns,v as rs}from"./select-BYhGx2AP.js";import{U as is}from"./user-DuZ1anjk.js";import{C as R,a as I,b as P,c as O}from"./card-fR48R4nC.js";import{A as ls}from"./arrow-left-Cg6Tgitn.js";import{a as cs,b as ds,P as os}from"./plus-BmEBgNT6.js";import{T as z}from"./trash-2-BXAxVmjf.js";/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ms=Q("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xs=Q("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);function us(s,a=500){const[c,r]=x.useState(s);return x.useEffect(()=>{const i=setTimeout(()=>{r(s)},a);return()=>{clearTimeout(i)}},[s,a]),c}function G(s){return s.split(" ").map(a=>a[0]).join("").toUpperCase().slice(0,2)}function hs({tenantId:s,open:a,onOpenChange:c}){const[r,i]=x.useState(""),[n,t]=x.useState(null),[h,l]=x.useState("Member"),v=us(r,300),{data:d,isLoading:o}=ye(v),u=Ce(),w=async()=>{if(n)try{await u.mutateAsync({tenantId:s,data:{userId:n.id,role:h}}),i(""),t(null),l("Member"),c(!1)}catch(m){console.error("Failed to add member:",m)}},y=()=>{i(""),t(null),l("Member"),c(!1)};return e.jsx(Pe,{open:a,onOpenChange:y,children:e.jsxs(Ee,{className:"sm:max-w-[500px]",children:[e.jsxs(Le,{children:[e.jsx(Fe,{children:"Add Member"}),e.jsx(_e,{children:"Search for a user and add them to this tenant with a specific role."})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Search User"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ve,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(Re,{placeholder:"Search by email or name...",value:r,onChange:m=>i(m.target.value),className:"pl-9"})]}),r.length>=2&&e.jsx("div",{className:"rounded-md border max-h-[200px] overflow-y-auto",children:o?e.jsx("div",{className:"flex items-center justify-center py-4",children:e.jsx(q,{className:"h-5 w-5 animate-spin text-muted-foreground"})}):(d==null?void 0:d.items.length)===0?e.jsxs("div",{className:"flex flex-col items-center py-4 text-center",children:[e.jsx(is,{className:"h-8 w-8 text-muted-foreground mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"No users found"})]}):e.jsx("div",{className:"divide-y",children:d==null?void 0:d.items.map(m=>e.jsxs("button",{type:"button",onClick:()=>t(m),className:Ie("flex w-full items-center gap-3 p-3 text-left hover:bg-muted/50 transition-colors",(n==null?void 0:n.id)===m.id&&"bg-muted"),children:[e.jsxs(L,{className:"h-9 w-9",children:[e.jsx(F,{src:m.avatarUrl}),e.jsx(_,{children:G(m.fullName)})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium truncate",children:m.fullName}),e.jsx("div",{className:"text-sm text-muted-foreground truncate",children:m.email})]}),(n==null?void 0:n.id)===m.id&&e.jsx(Be,{className:"h-5 w-5 text-primary"})]},m.id))})})]}),n&&e.jsx("div",{className:"rounded-lg border bg-muted/30 p-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(L,{children:[e.jsx(F,{src:n.avatarUrl}),e.jsx(_,{children:G(n.fullName)})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:n.fullName}),e.jsx("div",{className:"text-sm text-muted-foreground",children:n.email})]}),e.jsx(g,{variant:"ghost",size:"sm",onClick:()=>t(null),children:"Change"})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Role"}),e.jsxs(J,{value:h,onValueChange:m=>l(m),children:[e.jsx(W,{children:e.jsx(X,{})}),e.jsxs(Y,{children:[e.jsx(b,{value:"Member",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Member"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Basic access to tenant resources"})]})}),e.jsx(b,{value:"Admin",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Admin"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Can manage members and settings"})]})}),e.jsx(b,{value:"Owner",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Owner"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Full control including billing"})]})})]})]})]})]}),u.error&&e.jsx("div",{className:"rounded-lg border border-destructive/50 bg-destructive/10 p-3",children:e.jsx("p",{className:"text-sm text-destructive",children:u.error.message??"Failed to add member"})}),e.jsxs(Ue,{children:[e.jsx(g,{variant:"outline",onClick:y,children:"Cancel"}),e.jsxs(g,{onClick:w,disabled:!n||u.isPending,children:[u.isPending&&e.jsx(q,{className:"mr-2 h-4 w-4 animate-spin"}),"Add Member"]})]})]})})}var S="Tabs",[js]=pe(S,[Z]),ee=Z(),[fs,$]=js(S),se=x.forwardRef((s,a)=>{const{__scopeTabs:c,value:r,onValueChange:i,defaultValue:n,orientation:t="horizontal",dir:h,activationMode:l="automatic",...v}=s,d=$e(h),[o,u]=fe({prop:r,onChange:i,defaultProp:n??"",caller:S});return e.jsx(fs,{scope:c,baseId:ge(),value:o,onValueChange:u,orientation:t,dir:d,activationMode:l,children:e.jsx(M.div,{dir:d,"data-orientation":t,...v,ref:a})})});se.displayName=S;var ae="TabsList",te=x.forwardRef((s,a)=>{const{__scopeTabs:c,loop:r=!0,...i}=s,n=$(ae,c),t=ee(c);return e.jsx(qe,{asChild:!0,...t,orientation:n.orientation,dir:n.dir,loop:r,children:e.jsx(M.div,{role:"tablist","aria-orientation":n.orientation,...i,ref:a})})});te.displayName=ae;var ne="TabsTrigger",re=x.forwardRef((s,a)=>{const{__scopeTabs:c,value:r,disabled:i=!1,...n}=s,t=$(ne,c),h=ee(c),l=ce(t.baseId,r),v=de(t.baseId,r),d=r===t.value;return e.jsx(He,{asChild:!0,...h,focusable:!i,active:d,children:e.jsx(M.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":v,"data-state":d?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:l,...n,ref:a,onMouseDown:D(s.onMouseDown,o=>{!i&&o.button===0&&o.ctrlKey===!1?t.onValueChange(r):o.preventDefault()}),onKeyDown:D(s.onKeyDown,o=>{[" ","Enter"].includes(o.key)&&t.onValueChange(r)}),onFocus:D(s.onFocus,()=>{const o=t.activationMode!=="manual";!d&&!i&&o&&t.onValueChange(r)})})})});re.displayName=ne;var ie="TabsContent",le=x.forwardRef((s,a)=>{const{__scopeTabs:c,value:r,forceMount:i,children:n,...t}=s,h=$(ie,c),l=ce(h.baseId,r),v=de(h.baseId,r),d=r===h.value,o=x.useRef(d);return x.useEffect(()=>{const u=requestAnimationFrame(()=>o.current=!1);return()=>cancelAnimationFrame(u)},[]),e.jsx(ve,{present:i||d,children:({present:u})=>e.jsx(M.div,{"data-state":d?"active":"inactive","data-orientation":h.orientation,role:"tabpanel","aria-labelledby":l,hidden:!u,id:v,tabIndex:0,...t,ref:a,style:{...s.style,animationDuration:o.current?"0s":void 0},children:u&&n})})});le.displayName=ie;function ce(s,a){return`${s}-trigger-${a}`}function de(s,a){return`${s}-content-${a}`}var gs=se,oe=te,me=re,xe=le;const vs=gs,ue=x.forwardRef(({className:s,...a},c)=>e.jsx(oe,{ref:c,className:B("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...a}));ue.displayName=oe.displayName;const U=x.forwardRef(({className:s,...a},c)=>e.jsx(me,{ref:c,className:B("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...a}));U.displayName=me.displayName;const V=x.forwardRef(({className:s,...a},c)=>e.jsx(xe,{ref:c,className:B("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...a}));V.displayName=xe.displayName;function K(s){switch(s){case"Active":return e.jsx(A,{className:"bg-green-500",children:"Active"});case"Suspended":return e.jsx(A,{className:"bg-yellow-500",children:"Suspended"});default:return e.jsx(A,{variant:"outline",children:s})}}function E(s){return new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}function ps(s){return s.split(" ").map(a=>a[0]).join("").toUpperCase().slice(0,2)}function ks(){const s=Ne(),{tenantId:a}=be(),[c,r]=x.useState(!1),[i,n]=x.useState(null),{data:t,isLoading:h}=Te(a??""),{data:l,isLoading:v}=Ae(a??""),d=Me(),o=Se(),u=De(),w=ke(),y=async()=>{a&&await d.mutateAsync(a)},m=async()=>{a&&await o.mutateAsync(a)},he=async(j,N)=>{a&&await u.mutateAsync({tenantId:a,userId:j,data:{role:N}})},je=async()=>{!a||!i||(await w.mutateAsync({tenantId:a,userId:i.userId}),n(null))};return h?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(f,{className:"h-10 w-10"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{className:"h-8 w-[300px]"}),e.jsx(f,{className:"h-4 w-[200px]"})]})]}),e.jsx("div",{className:"grid gap-6 md:grid-cols-2",children:e.jsxs(R,{children:[e.jsx(I,{children:e.jsx(f,{className:"h-6 w-[150px]"})}),e.jsx(P,{className:"space-y-4",children:Array.from({length:4}).map((j,N)=>e.jsx(f,{className:"h-4 w-full"},N))})]})})]}):t?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(g,{variant:"ghost",size:"icon",onClick:()=>s("/tenants"),children:e.jsx(ls,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex h-14 w-14 items-center justify-center rounded-full bg-primary/10",children:t.logoUrl?e.jsx("img",{src:t.logoUrl,alt:t.name,className:"h-14 w-14 rounded-full object-cover"}):e.jsx(H,{className:"h-7 w-7 text-primary"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h1",{className:"text-2xl font-bold",children:t.name}),K(t.status)]}),e.jsxs("p",{className:"text-muted-foreground",children:[e.jsx("code",{className:"text-sm",children:t.slug}),t.website&&e.jsxs(e.Fragment,{children:[" Â· ",e.jsxs("a",{href:t.website,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 hover:underline",children:[t.website.replace(/^https?:\/\//,""),e.jsx(ms,{className:"h-3 w-3"})]})]})]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(g,{variant:"outline",onClick:()=>s(`/tenants/${a}/edit`),children:[e.jsx(xs,{className:"mr-2 h-4 w-4"}),"Edit"]}),e.jsxs(Oe,{children:[e.jsx(ze,{asChild:!0,children:e.jsx(g,{variant:"outline",size:"icon",children:e.jsx(Ge,{className:"h-4 w-4"})})}),e.jsxs(Ke,{align:"end",children:[t.status==="Active"?e.jsxs(k,{onClick:y,disabled:d.isPending,children:[e.jsx(cs,{className:"mr-2 h-4 w-4"}),"Suspend Tenant"]}):e.jsxs(k,{onClick:m,disabled:o.isPending,children:[e.jsx(ds,{className:"mr-2 h-4 w-4"}),"Reactivate Tenant"]}),e.jsx(Qe,{}),e.jsxs(k,{className:"text-destructive",children:[e.jsx(z,{className:"mr-2 h-4 w-4"}),"Delete Tenant"]})]})]})]})]}),e.jsxs(vs,{defaultValue:"overview",className:"space-y-6",children:[e.jsxs(ue,{children:[e.jsx(U,{value:"overview",children:"Overview"}),e.jsxs(U,{value:"members",children:["Members",(l==null?void 0:l.items)&&e.jsx(A,{variant:"secondary",className:"ml-2",children:l.items.length})]})]}),e.jsx(V,{value:"overview",className:"space-y-6",children:e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(R,{children:[e.jsx(I,{children:e.jsx(O,{children:"Details"})}),e.jsxs(P,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Name"}),e.jsx("p",{children:t.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Slug"}),e.jsx("p",{children:e.jsx("code",{children:t.slug})})]}),t.description&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Description"}),e.jsx("p",{children:t.description})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Created"}),e.jsx("p",{children:E(t.createdAt)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Last Updated"}),e.jsx("p",{children:E(t.updatedAt)})]})]})]}),e.jsxs(R,{children:[e.jsx(I,{children:e.jsx(O,{children:"Statistics"})}),e.jsxs(P,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Members"}),e.jsx("span",{className:"font-semibold",children:(l==null?void 0:l.items.length)??0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Status"}),K(t.status)]})]})]})]})}),e.jsxs(V,{value:"members",className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Members"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage users who belong to this tenant"})]}),e.jsxs(g,{onClick:()=>r(!0),children:[e.jsx(os,{className:"mr-2 h-4 w-4"}),"Add Member"]})]}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(Je,{children:[e.jsx(We,{children:e.jsxs(C,{children:[e.jsx(T,{children:"User"}),e.jsx(T,{children:"Role"}),e.jsx(T,{children:"Joined"}),e.jsx(T,{className:"w-[50px]"})]})}),e.jsx(Xe,{children:v?Array.from({length:3}).map((j,N)=>e.jsxs(C,{children:[e.jsx(p,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(f,{className:"h-10 w-10 rounded-full"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(f,{className:"h-4 w-[150px]"}),e.jsx(f,{className:"h-3 w-[200px]"})]})]})}),e.jsx(p,{children:e.jsx(f,{className:"h-5 w-[80px]"})}),e.jsx(p,{children:e.jsx(f,{className:"h-4 w-[100px]"})}),e.jsx(p,{children:e.jsx(f,{className:"h-8 w-8"})})]},N)):(l==null?void 0:l.items.length)===0?e.jsx(C,{children:e.jsx(p,{colSpan:4,className:"h-24 text-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(we,{className:"h-8 w-8 text-muted-foreground"}),e.jsx("p",{className:"text-muted-foreground",children:"No members yet"}),e.jsx(g,{variant:"outline",size:"sm",onClick:()=>r(!0),children:"Add the first member"})]})})}):l==null?void 0:l.items.map(j=>e.jsxs(C,{children:[e.jsx(p,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(L,{children:[e.jsx(F,{src:j.avatarUrl}),e.jsx(_,{children:ps(j.fullName)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:j.fullName}),e.jsx("div",{className:"text-sm text-muted-foreground",children:j.email})]})]})}),e.jsx(p,{children:e.jsxs(J,{value:j.role,onValueChange:N=>he(j.userId,N),disabled:u.isPending,children:[e.jsx(W,{className:"w-[120px]",children:e.jsx(X,{})}),e.jsxs(Y,{children:[e.jsx(b,{value:"Member",children:"Member"}),e.jsx(b,{value:"Admin",children:"Admin"}),e.jsx(b,{value:"Owner",children:"Owner"})]})]})}),e.jsx(p,{className:"text-muted-foreground",children:E(j.joinedAt)}),e.jsx(p,{children:e.jsx(g,{variant:"ghost",size:"icon",onClick:()=>n(j),children:e.jsx(z,{className:"h-4 w-4 text-muted-foreground hover:text-destructive"})})})]},j.id))})]})})]})]}),a&&e.jsx(hs,{tenantId:a,open:c,onOpenChange:r}),e.jsx(Ye,{open:!!i,onOpenChange:()=>n(null),children:e.jsxs(Ze,{children:[e.jsxs(es,{children:[e.jsx(ss,{children:"Remove Member"}),e.jsxs(as,{children:["Are you sure you want to remove ",e.jsx("strong",{children:i==null?void 0:i.fullName})," from this tenant? They will lose access to all tenant resources."]})]}),e.jsxs(ts,{children:[e.jsx(ns,{children:"Cancel"}),e.jsx(rs,{onClick:je,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:w.isPending?"Removing...":"Remove"})]})]})})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(H,{className:"h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Tenant not found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"The tenant you're looking for doesn't exist or has been deleted."}),e.jsx(g,{onClick:()=>s("/tenants"),children:"Back to Tenants"})]})}export{ks as TenantDetailPage};
//# sourceMappingURL=TenantDetailPage-Cfda3qe_.js.map
