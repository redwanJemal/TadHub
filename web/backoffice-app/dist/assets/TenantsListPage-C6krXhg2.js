import{u as B,r as x,j as e,B as c,L as z}from"./index-ChhCqHwX.js";import{u as F,a as L,b as R,c as U,I as E,S as r}from"./skeleton-BTbiLvYO.js";import{P as I,S as H,a as V,b as $,c as q,d as Q,e as g,T as O,f as _,g as u,h as d,i as G,j as t,B as p,D as J,k as K,E as W,l as X,m as o,U as Y,n as b,o as Z,p as ee,q as se,A as ae,r as te,s as le,t as ne,u as re,v as ie,w as ce,x as de,y as h}from"./select-BXfZ_36s.js";function oe(l){switch(l){case"Active":return e.jsx(h,{variant:"default",className:"bg-green-500",children:"Active"});case"Suspended":return e.jsx(h,{variant:"secondary",className:"bg-yellow-500 text-white",children:"Suspended"});case"Deleted":return e.jsx(h,{variant:"destructive",children:"Deleted"});default:return e.jsx(h,{variant:"outline",children:l})}}function xe(l){return new Date(l).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}function je(){const l=B(),[v,y]=x.useState(""),[m,D]=x.useState("all"),[n,N]=x.useState(1),[i,j]=x.useState(null),{data:a,isLoading:C,error:A}=F({page:n,perPage:20,q:v||void 0,filter:m!=="all"?{status:m}:void 0}),f=L(),w=R(),S=U(),T=async s=>{await f.mutateAsync(s.id)},k=async s=>{await w.mutateAsync(s.id)},P=async()=>{i&&(await S.mutateAsync(i.id),j(null))};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Tenants"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage agencies and organizations on the platform"})]}),e.jsxs(c,{onClick:()=>l("/tenants/new"),children:[e.jsx(I,{className:"mr-2 h-4 w-4"}),"Create Tenant"]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative flex-1 max-w-sm",children:[e.jsx(H,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(E,{placeholder:"Search tenants...",value:v,onChange:s=>y(s.target.value),className:"pl-9"})]}),e.jsxs(V,{value:m,onValueChange:D,children:[e.jsx($,{className:"w-[180px]",children:e.jsx(q,{placeholder:"Filter by status"})}),e.jsxs(Q,{children:[e.jsx(g,{value:"all",children:"All Statuses"}),e.jsx(g,{value:"Active",children:"Active"}),e.jsx(g,{value:"Suspended",children:"Suspended"})]})]})]}),A&&e.jsx("div",{className:"rounded-lg border border-destructive/50 bg-destructive/10 p-4",children:e.jsx("p",{className:"text-sm text-destructive",children:"Failed to load tenants. Please try again."})}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs(u,{children:[e.jsx(d,{children:"Tenant"}),e.jsx(d,{children:"Slug"}),e.jsx(d,{children:"Status"}),e.jsx(d,{children:"Created"}),e.jsx(d,{className:"w-[50px]"})]})}),e.jsx(G,{children:C?Array.from({length:5}).map((s,M)=>e.jsxs(u,{children:[e.jsx(t,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(r,{className:"h-10 w-10 rounded-full"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{className:"h-4 w-[200px]"}),e.jsx(r,{className:"h-3 w-[150px]"})]})]})}),e.jsx(t,{children:e.jsx(r,{className:"h-4 w-[100px]"})}),e.jsx(t,{children:e.jsx(r,{className:"h-5 w-[80px]"})}),e.jsx(t,{children:e.jsx(r,{className:"h-4 w-[100px]"})}),e.jsx(t,{children:e.jsx(r,{className:"h-8 w-8"})})]},M)):(a==null?void 0:a.items.length)===0?e.jsx(u,{children:e.jsx(t,{colSpan:5,className:"h-24 text-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(p,{className:"h-8 w-8 text-muted-foreground"}),e.jsx("p",{className:"text-muted-foreground",children:"No tenants found"}),e.jsx(c,{variant:"outline",size:"sm",onClick:()=>l("/tenants/new"),children:"Create your first tenant"})]})})}):a==null?void 0:a.items.map(s=>e.jsxs(u,{children:[e.jsx(t,{children:e.jsxs(z,{to:`/tenants/${s.id}`,className:"flex items-center gap-3 hover:underline",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-primary/10",children:s.logoUrl?e.jsx("img",{src:s.logoUrl,alt:s.name,className:"h-10 w-10 rounded-full object-cover"}):e.jsx(p,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.name}),s.description&&e.jsx("div",{className:"text-sm text-muted-foreground line-clamp-1",children:s.description})]})]})}),e.jsx(t,{children:e.jsx("code",{className:"text-sm text-muted-foreground",children:s.slug})}),e.jsx(t,{children:oe(s.status)}),e.jsx(t,{className:"text-muted-foreground",children:xe(s.createdAt)}),e.jsx(t,{children:e.jsxs(J,{children:[e.jsx(K,{asChild:!0,children:e.jsx(c,{variant:"ghost",size:"icon",children:e.jsx(W,{className:"h-4 w-4"})})}),e.jsxs(X,{align:"end",children:[e.jsxs(o,{onClick:()=>l(`/tenants/${s.id}`),children:[e.jsx(p,{className:"mr-2 h-4 w-4"}),"View Details"]}),e.jsxs(o,{onClick:()=>l(`/tenants/${s.id}/members`),children:[e.jsx(Y,{className:"mr-2 h-4 w-4"}),"Manage Members"]}),e.jsx(b,{}),s.status==="Active"?e.jsxs(o,{onClick:()=>T(s),disabled:f.isPending,children:[e.jsx(Z,{className:"mr-2 h-4 w-4"}),"Suspend"]}):s.status==="Suspended"?e.jsxs(o,{onClick:()=>k(s),disabled:w.isPending,children:[e.jsx(ee,{className:"mr-2 h-4 w-4"}),"Reactivate"]}):null,e.jsx(b,{}),e.jsxs(o,{className:"text-destructive focus:text-destructive",onClick:()=>j(s),children:[e.jsx(se,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})})]},s.id))})]})}),a&&a.totalPages>1&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Showing ",(n-1)*20+1," to ",Math.min(n*20,a.totalCount)," of ",a.totalCount," tenants"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(c,{variant:"outline",size:"sm",disabled:n===1,onClick:()=>N(n-1),children:"Previous"}),e.jsx(c,{variant:"outline",size:"sm",disabled:n>=a.totalPages,onClick:()=>N(n+1),children:"Next"})]})]}),e.jsx(ae,{open:!!i,onOpenChange:()=>j(null),children:e.jsxs(te,{children:[e.jsxs(le,{children:[e.jsx(ne,{children:"Delete Tenant"}),e.jsxs(re,{children:["Are you sure you want to delete ",e.jsx("strong",{children:i==null?void 0:i.name}),"? This action cannot be undone and will remove all associated data."]})]}),e.jsxs(ie,{children:[e.jsx(ce,{children:"Cancel"}),e.jsx(de,{onClick:P,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:S.isPending?"Deleting...":"Delete"})]})]})})]})}export{je as TenantsListPage};
//# sourceMappingURL=TenantsListPage-C6krXhg2.js.map
