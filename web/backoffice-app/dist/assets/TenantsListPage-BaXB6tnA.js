import{u as O,r as x,j as e,B as n,X as Q,d as w,L as q,U as X}from"./index-DHujyevu.js";import{u as _,a as G,b as J,c as K}from"./hooks-B5u2P0FD.js";import{I as W,S as i}from"./skeleton-Cykrd9Vb.js";import{S as Y,T as Z,a as ee,b as g,c as h,d as se,e as t,D as ae,f as te,E as le,g as ne,h as m,i as T,A as ie,j as re,k as ce,l as de,m as oe,n as xe,o as he,p as me,B as p}from"./alert-dialog-CJk1K280.js";import{C as k}from"./checkbox-OxaHLpGK.js";import{S as ue,a as je,b as ge,c as pe,d as S}from"./select-BSlC7mBy.js";import{P as ve,a as P,b as Ne}from"./plus-Das__poz.js";import{T as M}from"./trash-2-CmWGCf1K.js";function fe(l){switch(l){case"Active":return e.jsx(p,{variant:"default",className:"bg-green-500",children:"Active"});case"Suspended":return e.jsx(p,{variant:"secondary",className:"bg-yellow-500 text-white",children:"Suspended"});case"Deleted":return e.jsx(p,{variant:"destructive",children:"Deleted"});default:return e.jsx(p,{variant:"outline",children:l})}}function we(l){return new Date(l).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}function Pe(){const l=O(),[b,z]=x.useState(""),[v,B]=x.useState("all"),[r,C]=x.useState(1),[d,N]=x.useState(null),[c,u]=x.useState(new Set),{data:a,isLoading:I,error:F}=_({page:r,perPage:20,q:b||void 0,filter:v!=="all"?{status:v}:void 0}),y=G(),D=J(),A=K(),L=async s=>{await y.mutateAsync(s.id)},R=async s=>{await D.mutateAsync(s.id)},U=async()=>{d&&(await A.mutateAsync(d.id),N(null))},j=x.useMemo(()=>(a==null?void 0:a.items.map(s=>s.id))??[],[a]),f=j.length>0&&j.every(s=>c.has(s)),E=j.some(s=>c.has(s)),$=()=>{u(f?new Set:new Set(j))},H=s=>{const o=new Set(c);o.has(s)?o.delete(s):o.add(s),u(o)},V=()=>u(new Set);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Tenants"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage agencies and organizations on the platform"})]}),e.jsxs(n,{onClick:()=>l("/tenants/new"),children:[e.jsx(ve,{className:"mr-2 h-4 w-4"}),"Create Tenant"]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative flex-1 max-w-sm",children:[e.jsx(Y,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(W,{placeholder:"Search tenants...",value:b,onChange:s=>z(s.target.value),className:"pl-9"})]}),e.jsxs(ue,{value:v,onValueChange:B,children:[e.jsx(je,{className:"w-[180px]",children:e.jsx(ge,{placeholder:"Filter by status"})}),e.jsxs(pe,{children:[e.jsx(S,{value:"all",children:"All Statuses"}),e.jsx(S,{value:"Active",children:"Active"}),e.jsx(S,{value:"Suspended",children:"Suspended"})]})]})]}),F&&e.jsx("div",{className:"rounded-lg border border-destructive/50 bg-destructive/10 p-4",children:e.jsx("p",{className:"text-sm text-destructive",children:"Failed to load tenants. Please try again."})}),c.size>0&&e.jsxs("div",{className:"flex items-center gap-4 rounded-lg border bg-muted/50 p-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(n,{variant:"ghost",size:"icon",onClick:V,children:e.jsx(Q,{className:"h-4 w-4"})}),e.jsxs("span",{className:"text-sm font-medium",children:[c.size," selected"]})]}),e.jsx("div",{className:"flex-1"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(n,{variant:"outline",size:"sm",disabled:!0,children:[e.jsx(P,{className:"mr-2 h-4 w-4"}),"Suspend Selected"]}),e.jsxs(n,{variant:"destructive",size:"sm",disabled:!0,children:[e.jsx(M,{className:"mr-2 h-4 w-4"}),"Delete Selected"]})]})]}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(Z,{children:[e.jsx(ee,{children:e.jsxs(g,{children:[e.jsx(h,{className:"w-[50px]",children:e.jsx(k,{checked:f,onCheckedChange:$,"aria-label":"Select all",className:E&&!f?"data-[state=checked]:bg-primary/50":""})}),e.jsx(h,{children:"Tenant"}),e.jsx(h,{children:"Slug"}),e.jsx(h,{children:"Status"}),e.jsx(h,{children:"Created"}),e.jsx(h,{className:"w-[50px]"})]})}),e.jsx(se,{children:I?Array.from({length:5}).map((s,o)=>e.jsxs(g,{children:[e.jsx(t,{children:e.jsx(i,{className:"h-4 w-4"})}),e.jsx(t,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(i,{className:"h-10 w-10 rounded-full"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(i,{className:"h-4 w-[200px]"}),e.jsx(i,{className:"h-3 w-[150px]"})]})]})}),e.jsx(t,{children:e.jsx(i,{className:"h-4 w-[100px]"})}),e.jsx(t,{children:e.jsx(i,{className:"h-5 w-[80px]"})}),e.jsx(t,{children:e.jsx(i,{className:"h-4 w-[100px]"})}),e.jsx(t,{children:e.jsx(i,{className:"h-8 w-8"})})]},o)):(a==null?void 0:a.items.length)===0?e.jsx(g,{children:e.jsx(t,{colSpan:6,className:"h-24 text-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(w,{className:"h-8 w-8 text-muted-foreground"}),e.jsx("p",{className:"text-muted-foreground",children:"No tenants found"}),e.jsx(n,{variant:"outline",size:"sm",onClick:()=>l("/tenants/new"),children:"Create your first tenant"})]})})}):a==null?void 0:a.items.map(s=>e.jsxs(g,{"data-state":c.has(s.id)?"selected":void 0,children:[e.jsx(t,{children:e.jsx(k,{checked:c.has(s.id),onCheckedChange:()=>H(s.id),"aria-label":`Select ${s.name}`})}),e.jsx(t,{children:e.jsxs(q,{to:`/tenants/${s.id}`,className:"flex items-center gap-3 hover:underline",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-primary/10",children:s.logoUrl?e.jsx("img",{src:s.logoUrl,alt:s.name,className:"h-10 w-10 rounded-full object-cover"}):e.jsx(w,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.name}),s.description&&e.jsx("div",{className:"text-sm text-muted-foreground line-clamp-1",children:s.description})]})]})}),e.jsx(t,{children:e.jsx("code",{className:"text-sm text-muted-foreground",children:s.slug})}),e.jsx(t,{children:fe(s.status)}),e.jsx(t,{className:"text-muted-foreground",children:we(s.createdAt)}),e.jsx(t,{children:e.jsxs(ae,{children:[e.jsx(te,{asChild:!0,children:e.jsx(n,{variant:"ghost",size:"icon",children:e.jsx(le,{className:"h-4 w-4"})})}),e.jsxs(ne,{align:"end",children:[e.jsxs(m,{onClick:()=>l(`/tenants/${s.id}`),children:[e.jsx(w,{className:"mr-2 h-4 w-4"}),"View Details"]}),e.jsxs(m,{onClick:()=>l(`/tenants/${s.id}/members`),children:[e.jsx(X,{className:"mr-2 h-4 w-4"}),"Manage Members"]}),e.jsx(T,{}),s.status==="Active"?e.jsxs(m,{onClick:()=>L(s),disabled:y.isPending,children:[e.jsx(P,{className:"mr-2 h-4 w-4"}),"Suspend"]}):s.status==="Suspended"?e.jsxs(m,{onClick:()=>R(s),disabled:D.isPending,children:[e.jsx(Ne,{className:"mr-2 h-4 w-4"}),"Reactivate"]}):null,e.jsx(T,{}),e.jsxs(m,{className:"text-destructive focus:text-destructive",onClick:()=>N(s),children:[e.jsx(M,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})})]},s.id))})]})}),a&&a.totalPages>1&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Showing ",(r-1)*20+1," to ",Math.min(r*20,a.totalCount)," of ",a.totalCount," tenants"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(n,{variant:"outline",size:"sm",disabled:r===1,onClick:()=>C(r-1),children:"Previous"}),e.jsx(n,{variant:"outline",size:"sm",disabled:r>=a.totalPages,onClick:()=>C(r+1),children:"Next"})]})]}),e.jsx(ie,{open:!!d,onOpenChange:()=>N(null),children:e.jsxs(re,{children:[e.jsxs(ce,{children:[e.jsx(de,{children:"Delete Tenant"}),e.jsxs(oe,{children:["Are you sure you want to delete ",e.jsx("strong",{children:d==null?void 0:d.name}),"? This action cannot be undone and will remove all associated data."]})]}),e.jsxs(xe,{children:[e.jsx(he,{children:"Cancel"}),e.jsx(me,{onClick:U,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:A.isPending?"Deleting...":"Delete"})]})]})})]})}export{Pe as TenantsListPage};
//# sourceMappingURL=TenantsListPage-BaXB6tnA.js.map
