import{c as ne,r,j as e,d as re,e as q,f as ce,g as K,h as O,i as le,k as ie,l as $,u as de,B as k,X as oe,m as z,L as ue,U as he}from"./index-B-lKMOhG.js";import{u as xe,a as me,b as je,c as pe,I as fe,S as w}from"./skeleton-CgOVYtv2.js";import{u as ge,C as ve,P as be,S as Ce,a as Ne,b as ke,c as we,d as Se,e as L,f as V,T as X,g as ye,h as De,i as R,j as A,k as Pe,l as j,D as Ae,m as Te,E as Ie,n as Re,o as I,p as G,q as Ee,A as Me,r as _e,s as Be,t as ze,v as Le,w as Fe,x as qe,y as Ue,B as E}from"./select-DTPGRdZK.js";/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=ne("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);var M="Checkbox",[Oe]=ie(M),[$e,U]=Oe(M);function Ve(a){const{__scopeCheckbox:c,checked:l,children:i,defaultChecked:h,disabled:t,form:f,name:d,onCheckedChange:x,required:o,value:p="on",internal_do_not_use_render:n}=a,[g,y]=ce({prop:l,defaultProp:h??!1,onChange:x,caller:M}),[v,b]=r.useState(null),[C,u]=r.useState(null),m=r.useRef(!1),T=v?!!f||!!v.closest("form"):!0,N={checked:g,disabled:t,setChecked:y,control:v,setControl:b,name:d,form:f,value:p,hasConsumerStoppedPropagationRef:m,required:o,defaultChecked:S(h)?!1:h,isFormControl:T,bubbleInput:C,setBubbleInput:u};return e.jsx($e,{scope:c,...N,children:Xe(n)?n(N):i})}var Q="CheckboxTrigger",J=r.forwardRef(({__scopeCheckbox:a,onKeyDown:c,onClick:l,...i},h)=>{const{control:t,value:f,disabled:d,checked:x,required:o,setControl:p,setChecked:n,hasConsumerStoppedPropagationRef:g,isFormControl:y,bubbleInput:v}=U(Q,a),b=K(h,p),C=r.useRef(x);return r.useEffect(()=>{const u=t==null?void 0:t.form;if(u){const m=()=>n(C.current);return u.addEventListener("reset",m),()=>u.removeEventListener("reset",m)}},[t,n]),e.jsx(q.button,{type:"button",role:"checkbox","aria-checked":S(x)?"mixed":x,"aria-required":o,"data-state":se(x),"data-disabled":d?"":void 0,disabled:d,value:f,...i,ref:b,onKeyDown:O(c,u=>{u.key==="Enter"&&u.preventDefault()}),onClick:O(l,u=>{n(m=>S(m)?!0:!m),v&&y&&(g.current=u.isPropagationStopped(),g.current||u.stopPropagation())})})});J.displayName=Q;var H=r.forwardRef((a,c)=>{const{__scopeCheckbox:l,name:i,checked:h,defaultChecked:t,required:f,disabled:d,value:x,onCheckedChange:o,form:p,...n}=a;return e.jsx(Ve,{__scopeCheckbox:l,checked:h,defaultChecked:t,disabled:d,required:f,onCheckedChange:o,name:i,form:p,value:x,internal_do_not_use_render:({isFormControl:g})=>e.jsxs(e.Fragment,{children:[e.jsx(J,{...n,ref:c,__scopeCheckbox:l}),g&&e.jsx(ee,{__scopeCheckbox:l})]})})});H.displayName=M;var W="CheckboxIndicator",Y=r.forwardRef((a,c)=>{const{__scopeCheckbox:l,forceMount:i,...h}=a,t=U(W,l);return e.jsx(re,{present:i||S(t.checked)||t.checked===!0,children:e.jsx(q.span,{"data-state":se(t.checked),"data-disabled":t.disabled?"":void 0,...h,ref:c,style:{pointerEvents:"none",...a.style}})})});Y.displayName=W;var Z="CheckboxBubbleInput",ee=r.forwardRef(({__scopeCheckbox:a,...c},l)=>{const{control:i,hasConsumerStoppedPropagationRef:h,checked:t,defaultChecked:f,required:d,disabled:x,name:o,value:p,form:n,bubbleInput:g,setBubbleInput:y}=U(Z,a),v=K(l,y),b=ge(t),C=le(i);r.useEffect(()=>{const m=g;if(!m)return;const T=window.HTMLInputElement.prototype,D=Object.getOwnPropertyDescriptor(T,"checked").set,_=!h.current;if(b!==t&&D){const B=new Event("click",{bubbles:_});m.indeterminate=S(t),D.call(m,S(t)?!1:t),m.dispatchEvent(B)}},[g,b,t,h]);const u=r.useRef(S(t)?!1:t);return e.jsx(q.input,{type:"checkbox","aria-hidden":!0,defaultChecked:f??u.current,required:d,disabled:x,name:o,value:p,form:n,...c,tabIndex:-1,ref:v,style:{...c.style,...C,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});ee.displayName=Z;function Xe(a){return typeof a=="function"}function S(a){return a==="indeterminate"}function se(a){return S(a)?"indeterminate":a?"checked":"unchecked"}const F=r.forwardRef(({className:a,indeterminate:c,...l},i)=>e.jsx(H,{ref:i,className:$("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",c&&"bg-primary text-primary-foreground",a),checked:c?"indeterminate":l.checked,...l,children:e.jsx(Y,{className:$("flex items-center justify-center text-current"),children:c?e.jsx(He,{className:"h-3 w-3"}):e.jsx(ve,{className:"h-3 w-3"})})}));F.displayName=H.displayName;function Ge(a){switch(a){case"Active":return e.jsx(E,{variant:"default",className:"bg-green-500",children:"Active"});case"Suspended":return e.jsx(E,{variant:"secondary",className:"bg-yellow-500 text-white",children:"Suspended"});case"Deleted":return e.jsx(E,{variant:"destructive",children:"Deleted"});default:return e.jsx(E,{variant:"outline",children:a})}}function Ke(a){return new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}function Ye(){const a=de(),[c,l]=r.useState(""),[i,h]=r.useState("all"),[t,f]=r.useState(1),[d,x]=r.useState(null),[o,p]=r.useState(new Set),{data:n,isLoading:g,error:y}=xe({page:t,perPage:20,q:c||void 0,filter:i!=="all"?{status:i}:void 0}),v=me(),b=je(),C=pe(),u=async s=>{await v.mutateAsync(s.id)},m=async s=>{await b.mutateAsync(s.id)},T=async()=>{d&&(await C.mutateAsync(d.id),x(null))},N=r.useMemo(()=>(n==null?void 0:n.items.map(s=>s.id))??[],[n]),D=N.length>0&&N.every(s=>o.has(s)),_=N.some(s=>o.has(s)),B=()=>{p(D?new Set:new Set(N))},te=s=>{const P=new Set(o);P.has(s)?P.delete(s):P.add(s),p(P)},ae=()=>p(new Set);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Tenants"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage agencies and organizations on the platform"})]}),e.jsxs(k,{onClick:()=>a("/tenants/new"),children:[e.jsx(be,{className:"mr-2 h-4 w-4"}),"Create Tenant"]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative flex-1 max-w-sm",children:[e.jsx(Ce,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(fe,{placeholder:"Search tenants...",value:c,onChange:s=>l(s.target.value),className:"pl-9"})]}),e.jsxs(Ne,{value:i,onValueChange:h,children:[e.jsx(ke,{className:"w-[180px]",children:e.jsx(we,{placeholder:"Filter by status"})}),e.jsxs(Se,{children:[e.jsx(L,{value:"all",children:"All Statuses"}),e.jsx(L,{value:"Active",children:"Active"}),e.jsx(L,{value:"Suspended",children:"Suspended"})]})]})]}),y&&e.jsx("div",{className:"rounded-lg border border-destructive/50 bg-destructive/10 p-4",children:e.jsx("p",{className:"text-sm text-destructive",children:"Failed to load tenants. Please try again."})}),o.size>0&&e.jsxs("div",{className:"flex items-center gap-4 rounded-lg border bg-muted/50 p-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{variant:"ghost",size:"icon",onClick:ae,children:e.jsx(oe,{className:"h-4 w-4"})}),e.jsxs("span",{className:"text-sm font-medium",children:[o.size," selected"]})]}),e.jsx("div",{className:"flex-1"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(k,{variant:"outline",size:"sm",disabled:!0,children:[e.jsx(V,{className:"mr-2 h-4 w-4"}),"Suspend Selected"]}),e.jsxs(k,{variant:"destructive",size:"sm",disabled:!0,children:[e.jsx(X,{className:"mr-2 h-4 w-4"}),"Delete Selected"]})]})]}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(ye,{children:[e.jsx(De,{children:e.jsxs(R,{children:[e.jsx(A,{className:"w-[50px]",children:e.jsx(F,{checked:D,onCheckedChange:B,"aria-label":"Select all",className:_&&!D?"data-[state=checked]:bg-primary/50":""})}),e.jsx(A,{children:"Tenant"}),e.jsx(A,{children:"Slug"}),e.jsx(A,{children:"Status"}),e.jsx(A,{children:"Created"}),e.jsx(A,{className:"w-[50px]"})]})}),e.jsx(Pe,{children:g?Array.from({length:5}).map((s,P)=>e.jsxs(R,{children:[e.jsx(j,{children:e.jsx(w,{className:"h-4 w-4"})}),e.jsx(j,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(w,{className:"h-10 w-10 rounded-full"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(w,{className:"h-4 w-[200px]"}),e.jsx(w,{className:"h-3 w-[150px]"})]})]})}),e.jsx(j,{children:e.jsx(w,{className:"h-4 w-[100px]"})}),e.jsx(j,{children:e.jsx(w,{className:"h-5 w-[80px]"})}),e.jsx(j,{children:e.jsx(w,{className:"h-4 w-[100px]"})}),e.jsx(j,{children:e.jsx(w,{className:"h-8 w-8"})})]},P)):(n==null?void 0:n.items.length)===0?e.jsx(R,{children:e.jsx(j,{colSpan:6,className:"h-24 text-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(z,{className:"h-8 w-8 text-muted-foreground"}),e.jsx("p",{className:"text-muted-foreground",children:"No tenants found"}),e.jsx(k,{variant:"outline",size:"sm",onClick:()=>a("/tenants/new"),children:"Create your first tenant"})]})})}):n==null?void 0:n.items.map(s=>e.jsxs(R,{"data-state":o.has(s.id)?"selected":void 0,children:[e.jsx(j,{children:e.jsx(F,{checked:o.has(s.id),onCheckedChange:()=>te(s.id),"aria-label":`Select ${s.name}`})}),e.jsx(j,{children:e.jsxs(ue,{to:`/tenants/${s.id}`,className:"flex items-center gap-3 hover:underline",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-primary/10",children:s.logoUrl?e.jsx("img",{src:s.logoUrl,alt:s.name,className:"h-10 w-10 rounded-full object-cover"}):e.jsx(z,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.name}),s.description&&e.jsx("div",{className:"text-sm text-muted-foreground line-clamp-1",children:s.description})]})]})}),e.jsx(j,{children:e.jsx("code",{className:"text-sm text-muted-foreground",children:s.slug})}),e.jsx(j,{children:Ge(s.status)}),e.jsx(j,{className:"text-muted-foreground",children:Ke(s.createdAt)}),e.jsx(j,{children:e.jsxs(Ae,{children:[e.jsx(Te,{asChild:!0,children:e.jsx(k,{variant:"ghost",size:"icon",children:e.jsx(Ie,{className:"h-4 w-4"})})}),e.jsxs(Re,{align:"end",children:[e.jsxs(I,{onClick:()=>a(`/tenants/${s.id}`),children:[e.jsx(z,{className:"mr-2 h-4 w-4"}),"View Details"]}),e.jsxs(I,{onClick:()=>a(`/tenants/${s.id}/members`),children:[e.jsx(he,{className:"mr-2 h-4 w-4"}),"Manage Members"]}),e.jsx(G,{}),s.status==="Active"?e.jsxs(I,{onClick:()=>u(s),disabled:v.isPending,children:[e.jsx(V,{className:"mr-2 h-4 w-4"}),"Suspend"]}):s.status==="Suspended"?e.jsxs(I,{onClick:()=>m(s),disabled:b.isPending,children:[e.jsx(Ee,{className:"mr-2 h-4 w-4"}),"Reactivate"]}):null,e.jsx(G,{}),e.jsxs(I,{className:"text-destructive focus:text-destructive",onClick:()=>x(s),children:[e.jsx(X,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})})]},s.id))})]})}),n&&n.totalPages>1&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Showing ",(t-1)*20+1," to ",Math.min(t*20,n.totalCount)," of ",n.totalCount," tenants"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{variant:"outline",size:"sm",disabled:t===1,onClick:()=>f(t-1),children:"Previous"}),e.jsx(k,{variant:"outline",size:"sm",disabled:t>=n.totalPages,onClick:()=>f(t+1),children:"Next"})]})]}),e.jsx(Me,{open:!!d,onOpenChange:()=>x(null),children:e.jsxs(_e,{children:[e.jsxs(Be,{children:[e.jsx(ze,{children:"Delete Tenant"}),e.jsxs(Le,{children:["Are you sure you want to delete ",e.jsx("strong",{children:d==null?void 0:d.name}),"? This action cannot be undone and will remove all associated data."]})]}),e.jsxs(Fe,{children:[e.jsx(qe,{children:"Cancel"}),e.jsx(Ue,{onClick:T,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:C.isPending?"Deleting...":"Delete"})]})]})})]})}export{Ye as TenantsListPage};
//# sourceMappingURL=TenantsListPage-AKZkNeAR.js.map
