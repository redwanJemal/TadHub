import{c as F,r,j as e,D as ve,E as _,G as E,H as be,I as qe,J as Ne,K as Ye,M as Je,N as se,w as Y,B as S,C as z,A as Qe,z as We,O as Xe,u as es,x as ne,U as ie,S as ss,Q as ts}from"./index-CfoPWh9S.js";import{c as as,u as ye,B as P,S as re,a as le,b as ce,d as oe,e as U,I as V,f as ns,T as is,g as rs,h as de,i as $,j as ls,k as Z,C as ue}from"./badge-BAzsu3vk.js";import{C as k,a as L,b as M,c as A,d as X}from"./card-C-mICwxT.js";import{a as R,S as O}from"./client-D6wYOnK2.js";import{T as cs}from"./TenantSheet-Ho41gGWZ.js";import{T as os,D as me,a as xe,b as he,c as pe,d as ge,e as fe,S as ds}from"./dialog-C06rURw4.js";/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=F("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=F("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=F("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=F("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ms=F("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xs=F("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=F("PowerOff",[["path",{d:"M18.36 6.64A9 9 0 0 1 20.77 15",key:"dxknvb"}],["path",{d:"M6.16 6.16a9 9 0 1 0 12.68 12.68",key:"1x7qb5"}],["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ps=F("Power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gs=F("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=F("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=F("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);var W="rovingFocusGroup.onEntryFocus",js={bubbles:!1,cancelable:!0},K="RovingFocusGroup",[ee,Se,vs]=as(K),[bs,Te]=be(K,[vs]),[Ns,ys]=bs(K),ke=r.forwardRef((s,i)=>e.jsx(ee.Provider,{scope:s.__scopeRovingFocusGroup,children:e.jsx(ee.Slot,{scope:s.__scopeRovingFocusGroup,children:e.jsx(ws,{...s,ref:i})})}));ke.displayName=K;var ws=r.forwardRef((s,i)=>{const{__scopeRovingFocusGroup:t,orientation:a,loop:d=!1,dir:u,currentTabStopId:c,defaultCurrentTabStopId:p,onCurrentTabStopIdChange:f,onEntryFocus:g,preventScrollOnEntryFocus:n=!1,...m}=s,j=r.useRef(null),x=qe(i,j),b=ye(u),[I,o]=Ne({prop:c,defaultProp:p??null,onChange:f,caller:K}),[w,T]=r.useState(!1),v=Ye(g),y=Se(t),h=r.useRef(!1),[C,G]=r.useState(0);return r.useEffect(()=>{const l=j.current;if(l)return l.addEventListener(W,v),()=>l.removeEventListener(W,v)},[v]),e.jsx(Ns,{scope:t,orientation:a,dir:b,loop:d,currentTabStopId:I,onItemFocus:r.useCallback(l=>o(l),[o]),onItemShiftTab:r.useCallback(()=>T(!0),[]),onFocusableItemAdd:r.useCallback(()=>G(l=>l+1),[]),onFocusableItemRemove:r.useCallback(()=>G(l=>l-1),[]),children:e.jsx(_.div,{tabIndex:w||C===0?-1:0,"data-orientation":a,...m,ref:x,style:{outline:"none",...s.style},onMouseDown:E(s.onMouseDown,()=>{h.current=!0}),onFocus:E(s.onFocus,l=>{const N=!h.current;if(l.target===l.currentTarget&&N&&!w){const ae=new CustomEvent(W,js);if(l.currentTarget.dispatchEvent(ae),!ae.defaultPrevented){const Q=y().filter(D=>D.focusable),Ve=Q.find(D=>D.active),Ke=Q.find(D=>D.id===I),ze=[Ve,Ke,...Q].filter(Boolean).map(D=>D.ref.current);Fe(ze,n)}}h.current=!1}),onBlur:E(s.onBlur,()=>T(!1))})})}),Ae="RovingFocusGroupItem",Ie=r.forwardRef((s,i)=>{const{__scopeRovingFocusGroup:t,focusable:a=!0,active:d=!1,tabStopId:u,children:c,...p}=s,f=ve(),g=u||f,n=ys(Ae,t),m=n.currentTabStopId===g,j=Se(t),{onFocusableItemAdd:x,onFocusableItemRemove:b,currentTabStopId:I}=n;return r.useEffect(()=>{if(a)return x(),()=>b()},[a,x,b]),e.jsx(ee.ItemSlot,{scope:t,id:g,focusable:a,active:d,children:e.jsx(_.span,{tabIndex:m?0:-1,"data-orientation":n.orientation,...p,ref:i,onMouseDown:E(s.onMouseDown,o=>{a?n.onItemFocus(g):o.preventDefault()}),onFocus:E(s.onFocus,()=>n.onItemFocus(g)),onKeyDown:E(s.onKeyDown,o=>{if(o.key==="Tab"&&o.shiftKey){n.onItemShiftTab();return}if(o.target!==o.currentTarget)return;const w=Ts(o,n.orientation,n.dir);if(w!==void 0){if(o.metaKey||o.ctrlKey||o.altKey||o.shiftKey)return;o.preventDefault();let v=j().filter(y=>y.focusable).map(y=>y.ref.current);if(w==="last")v.reverse();else if(w==="prev"||w==="next"){w==="prev"&&v.reverse();const y=v.indexOf(o.currentTarget);v=n.loop?ks(v,y+1):v.slice(y+1)}setTimeout(()=>Fe(v))}}),children:typeof c=="function"?c({isCurrentTabStop:m,hasTabStop:I!=null}):c})})});Ie.displayName=Ae;var Cs={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Ss(s,i){return i!=="rtl"?s:s==="ArrowLeft"?"ArrowRight":s==="ArrowRight"?"ArrowLeft":s}function Ts(s,i,t){const a=Ss(s.key,t);if(!(i==="vertical"&&["ArrowLeft","ArrowRight"].includes(a))&&!(i==="horizontal"&&["ArrowUp","ArrowDown"].includes(a)))return Cs[a]}function Fe(s,i=!1){const t=document.activeElement;for(const a of s)if(a===t||(a.focus({preventScroll:i}),document.activeElement!==t))return}function ks(s,i){return s.map((t,a)=>s[(i+a)%s.length])}var As=ke,Is=Ie,J="Tabs",[Fs]=be(J,[Te]),Ee=Te(),[Es,te]=Fs(J),Re=r.forwardRef((s,i)=>{const{__scopeTabs:t,value:a,onValueChange:d,defaultValue:u,orientation:c="horizontal",dir:p,activationMode:f="automatic",...g}=s,n=ye(p),[m,j]=Ne({prop:a,onChange:d,defaultProp:u??"",caller:J});return e.jsx(Es,{scope:t,baseId:ve(),value:m,onValueChange:j,orientation:c,dir:n,activationMode:f,children:e.jsx(_.div,{dir:n,"data-orientation":c,...g,ref:i})})});Re.displayName=J;var De="TabsList",Ue=r.forwardRef((s,i)=>{const{__scopeTabs:t,loop:a=!0,...d}=s,u=te(De,t),c=Ee(t);return e.jsx(As,{asChild:!0,...c,orientation:u.orientation,dir:u.dir,loop:a,children:e.jsx(_.div,{role:"tablist","aria-orientation":u.orientation,...d,ref:i})})});Ue.displayName=De;var Pe="TabsTrigger",Oe=r.forwardRef((s,i)=>{const{__scopeTabs:t,value:a,disabled:d=!1,...u}=s,c=te(Pe,t),p=Ee(t),f=_e(c.baseId,a),g=Ge(c.baseId,a),n=a===c.value;return e.jsx(Is,{asChild:!0,...p,focusable:!d,active:n,children:e.jsx(_.button,{type:"button",role:"tab","aria-selected":n,"aria-controls":g,"data-state":n?"active":"inactive","data-disabled":d?"":void 0,disabled:d,id:f,...u,ref:i,onMouseDown:E(s.onMouseDown,m=>{!d&&m.button===0&&m.ctrlKey===!1?c.onValueChange(a):m.preventDefault()}),onKeyDown:E(s.onKeyDown,m=>{[" ","Enter"].includes(m.key)&&c.onValueChange(a)}),onFocus:E(s.onFocus,()=>{const m=c.activationMode!=="manual";!n&&!d&&m&&c.onValueChange(a)})})})});Oe.displayName=Pe;var Le="TabsContent",Me=r.forwardRef((s,i)=>{const{__scopeTabs:t,value:a,forceMount:d,children:u,...c}=s,p=te(Le,t),f=_e(p.baseId,a),g=Ge(p.baseId,a),n=a===p.value,m=r.useRef(n);return r.useEffect(()=>{const j=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(j)},[]),e.jsx(Je,{present:d||n,children:({present:j})=>e.jsx(_.div,{"data-state":n?"active":"inactive","data-orientation":p.orientation,role:"tabpanel","aria-labelledby":f,hidden:!j,id:g,tabIndex:0,...c,ref:i,style:{...s.style,animationDuration:m.current?"0s":void 0},children:j&&u})})});Me.displayName=Le;function _e(s,i){return`${s}-trigger-${i}`}function Ge(s,i){return`${s}-content-${i}`}var Rs=Re,$e=Ue,Ze=Oe,Be=Me;const Ds=Rs,He=r.forwardRef(({className:s,...i},t)=>e.jsx($e,{ref:t,className:se("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...i}));He.displayName=$e.displayName;const B=r.forwardRef(({className:s,...i},t)=>e.jsx(Ze,{ref:t,className:se("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...i}));B.displayName=Ze.displayName;const H=r.forwardRef(({className:s,...i},t)=>e.jsx(Be,{ref:t,className:se("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...i}));H.displayName=Be.displayName;function Us({tenant:s,onUpdate:i}){var w,T,v,y,h,C,G;const{t}=Y("tenants"),[a,d]=r.useState([]),[u,c]=r.useState(!1),[p,f]=r.useState(!0),[g,n]=r.useState(null),[m,j]=r.useState(null),[x,b]=r.useState({planId:((w=s.plan)==null?void 0:w.id)||"",status:((T=s.subscription)==null?void 0:T.status)||"active",validUntil:((y=(v=s.subscription)==null?void 0:v.currentPeriodEnd)==null?void 0:y.split("T")[0])||"",maxUsersOverride:"",notes:""});r.useEffect(()=>{async function l(){try{const N=await R.get("/admin/plans");d(N)}catch{d([{id:"free",name:"Free",slug:"free",price:0,interval:"month"},{id:"starter",name:"Starter",slug:"starter",price:19,interval:"month"},{id:"pro",name:"Pro",slug:"pro",price:49,interval:"month"},{id:"enterprise",name:"Enterprise",slug:"enterprise",price:199,interval:"month"}])}finally{f(!1)}}l()},[]);const I=async()=>{c(!0),n(null),j(null);try{await R.post(`/admin/tenants/${s.id}/subscription`,{planId:x.planId||void 0,status:x.status,validUntil:x.validUntil||void 0,maxUsersOverride:x.maxUsersOverride?parseInt(x.maxUsersOverride,10):void 0,notes:x.notes||void 0}),j(t("subscription.updateSuccess")),i()}catch(l){n(l instanceof Error?l.message:"Failed to update subscription")}finally{c(!1)}},o=a.find(l=>{var N;return l.id===((N=s.plan)==null?void 0:N.id)});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(k,{children:[e.jsx(L,{children:e.jsxs(M,{className:"flex items-center gap-2",children:[e.jsx(q,{className:"h-5 w-5"}),t("subscription.current")]})}),e.jsxs(A,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 p-4 bg-muted/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-primary/10",children:e.jsx(q,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:(o==null?void 0:o.name)||((h=s.plan)==null?void 0:h.name)||t("noPlan")}),(o==null?void 0:o.price)!==void 0&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["$",o.price,"/",o.interval||"month"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[((C=s.subscription)==null?void 0:C.status)&&e.jsx(P,{variant:s.subscription.status==="active"?"success":s.subscription.status==="past_due"?"destructive":"secondary",children:s.subscription.status}),((G=s.subscription)==null?void 0:G.currentPeriodEnd)&&e.jsxs("span",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[e.jsx(we,{className:"h-4 w-4"}),t("subscription.renewsOn")," ",new Date(s.subscription.currentPeriodEnd).toLocaleDateString()]})]})]}),(o==null?void 0:o.features)&&o.features.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"text-sm font-medium mb-2",children:t("subscription.features")}),e.jsx("ul",{className:"space-y-1",children:o.features.map((l,N)=>e.jsxs("li",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(us,{className:"h-4 w-4 text-green-500"}),l]},N))})]})]})]}),e.jsxs(k,{children:[e.jsxs(L,{children:[e.jsxs(M,{className:"flex items-center gap-2",children:[e.jsx(Ce,{className:"h-5 w-5 text-orange-500"}),t("subscription.manualOverride")]}),e.jsx(X,{children:t("subscription.manualOverrideHint")})]}),e.jsxs(A,{className:"space-y-4",children:[g&&e.jsx("div",{className:"rounded-md bg-destructive/10 p-3 text-sm text-destructive",children:g}),m&&e.jsx("div",{className:"rounded-md bg-green-500/10 p-3 text-sm text-green-600",children:m}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:t("subscription.plan")}),e.jsxs(re,{value:x.planId,onValueChange:l=>b(N=>({...N,planId:l})),disabled:u||p,children:[e.jsx(le,{children:e.jsx(ce,{placeholder:t("subscription.selectPlan")})}),e.jsxs(oe,{children:[e.jsx(U,{value:"",children:t("noPlan")}),a.map(l=>e.jsxs(U,{value:l.id,children:[l.name,l.price!==void 0&&` - $${l.price}/${l.interval}`]},l.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:t("subscription.status")}),e.jsxs(re,{value:x.status,onValueChange:l=>b(N=>({...N,status:l})),disabled:u,children:[e.jsx(le,{children:e.jsx(ce,{})}),e.jsxs(oe,{children:[e.jsx(U,{value:"active",children:t("subscription.statuses.active")}),e.jsx(U,{value:"trialing",children:t("subscription.statuses.trialing")}),e.jsx(U,{value:"past_due",children:t("subscription.statuses.pastDue")}),e.jsx(U,{value:"canceled",children:t("subscription.statuses.canceled")}),e.jsx(U,{value:"unpaid",children:t("subscription.statuses.unpaid")})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:t("subscription.validUntil")}),e.jsx(V,{type:"date",value:x.validUntil,onChange:l=>b(N=>({...N,validUntil:l.target.value})),disabled:u})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:t("subscription.maxUsersOverride")}),e.jsx(V,{type:"number",min:0,placeholder:t("subscription.maxUsersOverridePlaceholder"),value:x.maxUsersOverride,onChange:l=>b(N=>({...N,maxUsersOverride:l.target.value})),disabled:u})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:t("subscription.notes")}),e.jsx(V,{placeholder:t("subscription.notesPlaceholder"),value:x.notes,onChange:l=>b(N=>({...N,notes:l.target.value})),disabled:u})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(S,{onClick:I,disabled:u,children:u?e.jsxs(e.Fragment,{children:[e.jsx(z,{className:"me-2 h-4 w-4 animate-spin"}),t("subscription.applying")]}):t("subscription.applyOverride")})})]})]})]})}function Ps({tenantId:s}){const{t:i}=Y("tenants"),[t,a]=r.useState([]),[d,u]=r.useState(!0),[c,p]=r.useState(""),f=r.useCallback(async()=>{u(!0);try{const n={};c&&(n.q=c);const m=await R.getWithMeta(`/admin/tenants/${s}/users`,n);a(m.data)}catch(n){console.error("Failed to fetch users:",n),a([{id:"1",email:"admin@example.com",firstName:"Admin",lastName:"User",role:"Admin",isActive:!0,lastLoginAt:new Date().toISOString(),joinedAt:new Date().toISOString()}])}finally{u(!1)}},[s,c]);r.useEffect(()=>{f()},[f]);const g=(n,m)=>`${n[0]||""}${m[0]||""}`.toUpperCase();return e.jsxs(k,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between",children:[e.jsx(M,{children:i("users.title")}),e.jsxs(S,{size:"sm",children:[e.jsx(fs,{className:"me-2 h-4 w-4"}),i("users.invite")]})]}),e.jsxs(A,{children:[e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(ns,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(V,{placeholder:i("users.searchPlaceholder"),value:c,onChange:n=>p(n.target.value),className:"ps-9"})]})}),d?e.jsx("div",{className:"space-y-3",children:[1,2,3].map(n=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(O,{className:"h-10 w-10 rounded-full"}),e.jsxs("div",{className:"space-y-1.5 flex-1",children:[e.jsx(O,{className:"h-4 w-32"}),e.jsx(O,{className:"h-3 w-48"})]})]},n))}):t.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:i("users.noUsers")}):e.jsxs(is,{children:[e.jsx(rs,{children:e.jsxs(de,{children:[e.jsx($,{children:i("users.columns.user")}),e.jsx($,{children:i("users.columns.role")}),e.jsx($,{children:i("users.columns.status")}),e.jsx($,{children:i("users.columns.lastLogin")}),e.jsx($,{className:"w-[50px]"})]})}),e.jsx(ls,{children:t.map(n=>e.jsxs(de,{children:[e.jsx(Z,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Qe,{className:"h-8 w-8",children:e.jsx(We,{className:"text-xs",children:g(n.firstName,n.lastName)})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium",children:[n.firstName," ",n.lastName]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:n.email})]})]})}),e.jsx(Z,{children:e.jsx(P,{variant:"outline",children:n.role})}),e.jsx(Z,{children:e.jsx(P,{variant:n.isActive?"success":"secondary",children:n.isActive?i("status.active"):i("status.inactive")})}),e.jsx(Z,{className:"text-muted-foreground",children:n.lastLoginAt?new Date(n.lastLoginAt).toLocaleDateString():i("users.never")}),e.jsx(Z,{children:e.jsx(S,{variant:"ghost",size:"icon",className:"h-8 w-8",children:e.jsx(ms,{className:"h-4 w-4"})})})]},n.id))})]})]})]})}function Os({tenant:s,onUpdate:i}){var T,v,y;const{t}=Y("tenants"),[a,d]=r.useState(!1),[u,c]=r.useState(null),[p,f]=r.useState(null),[g,n]=r.useState(!1),[m,j]=r.useState(!1),[x,b]=r.useState({maxUsers:((T=s.settings)==null?void 0:T.maxUsers)||10,allowRegistration:((v=s.settings)==null?void 0:v.allowRegistration)??!0,enableApi:((y=s.settings)==null?void 0:y.enableApi)??!1}),I=async()=>{d(!0),c(null),f(null);try{await R.patch(`/admin/tenants/${s.id}`,{settings:x}),f(t("settings.saveSuccess")),i()}catch(h){c(h instanceof Error?h.message:"Failed to save settings")}finally{d(!1)}},o=async()=>{d(!0),c(null);try{s.isActive?await R.post(`/admin/tenants/${s.id}/suspend`):await R.post(`/admin/tenants/${s.id}/activate`),i(),n(!1)}catch(h){c(h instanceof Error?h.message:"Failed to update tenant status")}finally{d(!1)}},w=async()=>{d(!0),c(null);try{await R.delete(`/admin/tenants/${s.id}`),window.location.href="/tenants"}catch(h){c(h instanceof Error?h.message:"Failed to delete tenant"),d(!1)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(k,{children:[e.jsxs(L,{children:[e.jsx(M,{children:t("settings.general.title")}),e.jsx(X,{children:t("settings.general.description")})]}),e.jsxs(A,{className:"space-y-6",children:[u&&e.jsx("div",{className:"rounded-md bg-destructive/10 p-3 text-sm text-destructive",children:u}),p&&e.jsx("div",{className:"rounded-md bg-green-500/10 p-3 text-sm text-green-600",children:p}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[e.jsx(ue,{checked:x.allowRegistration,onCheckedChange:h=>b(C=>({...C,allowRegistration:!!h})),disabled:a,className:"mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:t("settings.allowRegistration")}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t("settings.allowRegistrationHint")})]})]}),e.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[e.jsx(ue,{checked:x.enableApi,onCheckedChange:h=>b(C=>({...C,enableApi:!!h})),disabled:a,className:"mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:t("settings.enableApi")}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t("settings.enableApiHint")})]})]})]}),e.jsxs("div",{className:"space-y-2 max-w-xs",children:[e.jsx("label",{className:"text-sm font-medium",children:t("settings.maxUsers")}),e.jsx(V,{type:"number",min:1,max:1e4,value:x.maxUsers,onChange:h=>b(C=>({...C,maxUsers:parseInt(h.target.value,10)||10})),disabled:a}),e.jsx("p",{className:"text-xs text-muted-foreground",children:t("settings.maxUsersHint")})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(S,{onClick:I,disabled:a,children:a?e.jsxs(e.Fragment,{children:[e.jsx(z,{className:"me-2 h-4 w-4 animate-spin"}),t("settings.saving")]}):e.jsxs(e.Fragment,{children:[e.jsx(gs,{className:"me-2 h-4 w-4"}),t("settings.save")]})})})]})]}),e.jsxs(k,{className:"border-destructive/50",children:[e.jsxs(L,{children:[e.jsxs(M,{className:"flex items-center gap-2 text-destructive",children:[e.jsx(Ce,{className:"h-5 w-5"}),t("settings.dangerZone.title")]}),e.jsx(X,{children:t("settings.dangerZone.description")})]}),e.jsxs(A,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.isActive?t("settings.dangerZone.suspend.title"):t("settings.dangerZone.activate.title")}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.isActive?t("settings.dangerZone.suspend.description"):t("settings.dangerZone.activate.description")})]}),e.jsx(S,{variant:s.isActive?"outline":"default",onClick:()=>n(!0),children:s.isActive?e.jsxs(e.Fragment,{children:[e.jsx(hs,{className:"me-2 h-4 w-4"}),t("settings.dangerZone.suspend.button")]}):e.jsxs(e.Fragment,{children:[e.jsx(ps,{className:"me-2 h-4 w-4"}),t("settings.dangerZone.activate.button")]})})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border border-destructive/50 rounded-lg bg-destructive/5",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-destructive",children:t("settings.dangerZone.delete.title")}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t("settings.dangerZone.delete.description")})]}),e.jsxs(S,{variant:"destructive",onClick:()=>j(!0),children:[e.jsx(os,{className:"me-2 h-4 w-4"}),t("settings.dangerZone.delete.button")]})]})]})]}),e.jsx(me,{open:g,onOpenChange:n,children:e.jsxs(xe,{children:[e.jsxs(he,{children:[e.jsx(pe,{children:s.isActive?t("settings.dangerZone.suspend.confirmTitle"):t("settings.dangerZone.activate.confirmTitle")}),e.jsx(ge,{children:s.isActive?t("settings.dangerZone.suspend.confirmDescription",{name:s.name}):t("settings.dangerZone.activate.confirmDescription",{name:s.name})})]}),e.jsxs(fe,{children:[e.jsx(S,{variant:"outline",onClick:()=>n(!1),disabled:a,children:t("actions.cancel")}),e.jsx(S,{variant:s.isActive?"destructive":"default",onClick:o,disabled:a,children:a?e.jsx(z,{className:"me-2 h-4 w-4 animate-spin"}):s.isActive?t("settings.dangerZone.suspend.button"):t("settings.dangerZone.activate.button")})]})]})}),e.jsx(me,{open:m,onOpenChange:j,children:e.jsxs(xe,{children:[e.jsxs(he,{children:[e.jsx(pe,{children:t("settings.dangerZone.delete.confirmTitle")}),e.jsx(ge,{children:t("settings.dangerZone.delete.confirmDescription",{name:s.name})})]}),e.jsxs(fe,{children:[e.jsx(S,{variant:"outline",onClick:()=>j(!1),disabled:a,children:t("actions.cancel")}),e.jsx(S,{variant:"destructive",onClick:w,disabled:a,children:a?e.jsx(z,{className:"me-2 h-4 w-4 animate-spin"}):t("settings.dangerZone.delete.button")})]})]})})]})}function Hs(){var I,o,w,T,v,y,h;const{t:s}=Y("tenants"),{id:i}=Xe(),t=es(),[a,d]=r.useState(null),[u,c]=r.useState(!0),[p,f]=r.useState(null),[g,n]=r.useState(!1),[m,j]=r.useState("overview"),x=r.useCallback(async()=>{if(i){c(!0),f(null);try{const C=await R.get(`/admin/tenants/${i}`);d(C)}catch(C){f(C instanceof Error?C.message:"Failed to load tenant")}finally{c(!1)}}},[i]);r.useEffect(()=>{x()},[x]);const b=()=>{t("/tenants")};return u?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(O,{className:"h-10 w-10 rounded-lg"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{className:"h-6 w-48"}),e.jsx(O,{className:"h-4 w-32"})]})]}),e.jsx(O,{className:"h-64 w-full"})]}):p||!a?e.jsxs("div",{className:"space-y-6",children:[e.jsxs(S,{variant:"ghost",onClick:b,children:[e.jsx(je,{className:"me-2 h-4 w-4"}),s("detail.backToList")]}),e.jsx(k,{children:e.jsxs(A,{className:"py-12 text-center",children:[e.jsx("p",{className:"text-muted-foreground",children:p||s("detail.notFound")}),e.jsx(S,{className:"mt-4",onClick:b,children:s("detail.backToList")})]})})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs(S,{variant:"ghost",onClick:b,className:"-ms-3",children:[e.jsx(je,{className:"me-2 h-4 w-4"}),s("detail.backToList")]}),e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-start sm:justify-between",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex h-14 w-14 items-center justify-center rounded-xl bg-primary/10",children:e.jsx(ne,{className:"h-7 w-7 text-primary"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h1",{className:"text-2xl font-bold",children:a.name}),e.jsx(P,{variant:a.isActive?"success":"secondary",children:a.isActive?s("status.active"):s("status.inactive")})]}),e.jsxs("div",{className:"flex items-center gap-3 text-sm text-muted-foreground mt-1",children:[e.jsx("span",{children:a.slug}),a.domain&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(xs,{className:"h-3 w-3"}),a.domain]})]})]})]})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(S,{variant:"outline",onClick:()=>n(!0),children:[e.jsx(ds,{className:"me-2 h-4 w-4"}),s("actions.edit")]})})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[e.jsx(k,{children:e.jsx(A,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-blue-100 dark:bg-blue-900/20",children:e.jsx(ie,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:a.usersCount}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s("detail.totalUsers")})]})]})})}),e.jsx(k,{children:e.jsx(A,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-green-100 dark:bg-green-900/20",children:e.jsx(q,{className:"h-5 w-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:((I=a.plan)==null?void 0:I.name)||s("noPlan")}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s("detail.currentPlan")})]})]})})}),e.jsx(k,{children:e.jsx(A,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-purple-100 dark:bg-purple-900/20",children:e.jsx(ss,{className:"h-5 w-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:((o=a.settings)==null?void 0:o.maxUsers)||"∞"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s("detail.maxUsers")})]})]})})}),e.jsx(k,{children:e.jsx(A,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-orange-100 dark:bg-orange-900/20",children:e.jsx(we,{className:"h-5 w-5 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:new Date(a.createdAt).toLocaleDateString()}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s("detail.created")})]})]})})})]}),e.jsxs(Ds,{value:m,onValueChange:j,children:[e.jsxs(He,{children:[e.jsxs(B,{value:"overview",children:[e.jsx(ne,{className:"me-2 h-4 w-4"}),s("detail.tabs.overview")]}),e.jsxs(B,{value:"users",children:[e.jsx(ie,{className:"me-2 h-4 w-4"}),s("detail.tabs.users")]}),e.jsxs(B,{value:"subscription",children:[e.jsx(q,{className:"me-2 h-4 w-4"}),s("detail.tabs.subscription")]}),e.jsxs(B,{value:"settings",children:[e.jsx(ts,{className:"me-2 h-4 w-4"}),s("detail.tabs.settings")]})]}),e.jsx(H,{value:"overview",className:"mt-6",children:e.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[e.jsxs(k,{children:[e.jsx(L,{children:e.jsx(M,{children:s("detail.info.title")})}),e.jsxs(A,{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:s("detail.info.name")}),e.jsx("span",{className:"font-medium",children:a.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:s("detail.info.slug")}),e.jsx("span",{className:"font-mono text-sm",children:a.slug})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:s("detail.info.domain")}),e.jsx("span",{children:a.domain||"-"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:s("detail.info.status")}),e.jsx(P,{variant:a.isActive?"success":"secondary",children:a.isActive?s("status.active"):s("status.inactive")})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:s("detail.info.created")}),e.jsx("span",{children:new Date(a.createdAt).toLocaleString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:s("detail.info.updated")}),e.jsx("span",{children:new Date(a.updatedAt).toLocaleString()})]})]})]}),e.jsxs(k,{children:[e.jsx(L,{children:e.jsx(M,{children:s("detail.quickSettings.title")})}),e.jsxs(A,{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-muted-foreground",children:s("settings.allowRegistration")}),e.jsx(P,{variant:(w=a.settings)!=null&&w.allowRegistration?"success":"secondary",children:(T=a.settings)!=null&&T.allowRegistration?s("enabled"):s("disabled")})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-muted-foreground",children:s("settings.enableApi")}),e.jsx(P,{variant:(v=a.settings)!=null&&v.enableApi?"success":"secondary",children:(y=a.settings)!=null&&y.enableApi?s("enabled"):s("disabled")})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-muted-foreground",children:s("settings.maxUsers")}),e.jsx("span",{className:"font-medium",children:((h=a.settings)==null?void 0:h.maxUsers)||"Unlimited"})]})]})]})]})}),e.jsx(H,{value:"users",className:"mt-6",children:e.jsx(Ps,{tenantId:a.id})}),e.jsx(H,{value:"subscription",className:"mt-6",children:e.jsx(Us,{tenant:a,onUpdate:x})}),e.jsx(H,{value:"settings",className:"mt-6",children:e.jsx(Os,{tenant:a,onUpdate:x})})]}),e.jsx(cs,{open:g,onOpenChange:n,onSuccess:x,tenant:a})]})}export{Hs as TenantDetailPage};
//# sourceMappingURL=TenantDetailPage-vJvfcnF2.js.map
