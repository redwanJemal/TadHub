{"version":3,"file":"hooks-B112JDJO.js","sources":["../../src/features/tenants/api.ts","../../src/features/tenants/hooks.ts"],"sourcesContent":["import { apiClient } from '@/shared/api/client';\nimport { PaginatedData, QueryParams } from '@/shared/api/types';\nimport {\n  TenantDto,\n  AdminCreateTenantRequest,\n  UpdateTenantRequest,\n  TenantUserDto,\n  AddTenantMemberRequest,\n  UpdateMemberRoleRequest,\n  UserProfileDto,\n} from './types';\n\n// ============================================================================\n// Tenant CRUD (Admin endpoints - no tenant context required)\n// ============================================================================\n\n/**\n * List all tenants (admin view)\n */\nexport async function listTenants(params?: QueryParams): Promise<PaginatedData<TenantDto>> {\n  return apiClient.get<PaginatedData<TenantDto>>('/admin/tenants', params);\n}\n\n/**\n * Get tenant by ID\n */\nexport async function getTenant(tenantId: string): Promise<TenantDto> {\n  return apiClient.get<TenantDto>(`/admin/tenants/${tenantId}`);\n}\n\n/**\n * Get tenant by slug\n */\nexport async function getTenantBySlug(slug: string): Promise<TenantDto> {\n  return apiClient.get<TenantDto>(`/admin/tenants/by-slug/${slug}`);\n}\n\n/**\n * Create a new tenant (admin â€” includes owner user creation)\n */\nexport async function createTenant(data: AdminCreateTenantRequest): Promise<TenantDto> {\n  return apiClient.post<TenantDto>('/admin/tenants', data);\n}\n\n/**\n * Update tenant\n */\nexport async function updateTenant(tenantId: string, data: UpdateTenantRequest): Promise<TenantDto> {\n  return apiClient.patch<TenantDto>(`/admin/tenants/${tenantId}`, data);\n}\n\n/**\n * Suspend tenant\n */\nexport async function suspendTenant(tenantId: string): Promise<void> {\n  return apiClient.post<void>(`/admin/tenants/${tenantId}/suspend`);\n}\n\n/**\n * Reactivate tenant\n */\nexport async function reactivateTenant(tenantId: string): Promise<void> {\n  return apiClient.post<void>(`/admin/tenants/${tenantId}/reactivate`);\n}\n\n/**\n * Delete tenant\n */\nexport async function deleteTenant(tenantId: string): Promise<void> {\n  return apiClient.delete<void>(`/admin/tenants/${tenantId}`);\n}\n\n// ============================================================================\n// Tenant Members (Admin endpoints)\n// ============================================================================\n\n/**\n * List tenant members\n */\nexport async function listTenantMembers(\n  tenantId: string,\n  params?: QueryParams\n): Promise<PaginatedData<TenantUserDto>> {\n  return apiClient.get<PaginatedData<TenantUserDto>>(`/admin/tenants/${tenantId}/members`, params);\n}\n\n/**\n * Get tenant member\n */\nexport async function getTenantMember(tenantId: string, userId: string): Promise<TenantUserDto> {\n  return apiClient.get<TenantUserDto>(`/admin/tenants/${tenantId}/members/${userId}`);\n}\n\n/**\n * Add member to tenant\n */\nexport async function addTenantMember(\n  tenantId: string,\n  data: AddTenantMemberRequest\n): Promise<TenantUserDto> {\n  return apiClient.post<TenantUserDto>(`/admin/tenants/${tenantId}/members`, data);\n}\n\n/**\n * Update member role\n */\nexport async function updateMemberRole(\n  tenantId: string,\n  userId: string,\n  data: UpdateMemberRoleRequest\n): Promise<TenantUserDto> {\n  return apiClient.patch<TenantUserDto>(`/admin/tenants/${tenantId}/members/${userId}`, data);\n}\n\n/**\n * Remove member from tenant\n */\nexport async function removeTenantMember(tenantId: string, userId: string): Promise<void> {\n  return apiClient.delete<void>(`/admin/tenants/${tenantId}/members/${userId}`);\n}\n\n// ============================================================================\n// Tenant Invitations (Admin endpoints)\n// ============================================================================\n\n/**\n * List tenant invitations\n */\nexport async function listTenantInvitations(\n  tenantId: string,\n  params?: QueryParams\n): Promise<PaginatedData<any>> {\n  return apiClient.get<PaginatedData<any>>(`/admin/tenants/${tenantId}/invitations`, params);\n}\n\n/**\n * Create invitation\n */\nexport async function createTenantInvitation(\n  tenantId: string,\n  data: { email: string; role: string }\n): Promise<any> {\n  return apiClient.post<any>(`/admin/tenants/${tenantId}/invitations`, data);\n}\n\n/**\n * Revoke invitation\n */\nexport async function revokeTenantInvitation(tenantId: string, invitationId: string): Promise<void> {\n  return apiClient.delete<void>(`/admin/tenants/${tenantId}/invitations/${invitationId}`);\n}\n\n// ============================================================================\n// Users (for searching/adding to tenants)\n// ============================================================================\n\n/**\n * List all users (admin)\n */\nexport async function listUsers(params?: QueryParams): Promise<PaginatedData<UserProfileDto>> {\n  return apiClient.get<PaginatedData<UserProfileDto>>('/users', params);\n}\n\n/**\n * Search users by email or name\n */\nexport async function searchUsers(query: string): Promise<PaginatedData<UserProfileDto>> {\n  return apiClient.get<PaginatedData<UserProfileDto>>('/users', {\n    search: query,\n    pageSize: 10,\n  });\n}\n\n/**\n * Get user by ID\n */\nexport async function getUser(userId: string): Promise<UserProfileDto> {\n  return apiClient.get<UserProfileDto>(`/users/${userId}`);\n}\n","import { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { QueryParams } from '@/shared/api/types';\nimport {\n  listTenants,\n  getTenant,\n  createTenant,\n  updateTenant,\n  suspendTenant,\n  reactivateTenant,\n  deleteTenant,\n  listTenantMembers,\n  addTenantMember,\n  updateMemberRole,\n  removeTenantMember,\n  listUsers,\n  searchUsers,\n} from './api';\nimport {\n  AdminCreateTenantRequest,\n  UpdateTenantRequest,\n  AddTenantMemberRequest,\n  UpdateMemberRoleRequest,\n} from './types';\n\n// ============================================================================\n// Query Keys\n// ============================================================================\n\nexport const tenantKeys = {\n  all: ['tenants'] as const,\n  lists: () => [...tenantKeys.all, 'list'] as const,\n  list: (params?: QueryParams) => [...tenantKeys.lists(), params] as const,\n  details: () => [...tenantKeys.all, 'detail'] as const,\n  detail: (id: string) => [...tenantKeys.details(), id] as const,\n  members: (tenantId: string) => [...tenantKeys.detail(tenantId), 'members'] as const,\n};\n\nexport const userKeys = {\n  all: ['users'] as const,\n  lists: () => [...userKeys.all, 'list'] as const,\n  list: (params?: QueryParams) => [...userKeys.lists(), params] as const,\n  search: (query: string) => [...userKeys.all, 'search', query] as const,\n};\n\n// ============================================================================\n// Tenant Queries\n// ============================================================================\n\nexport function useTenants(params?: QueryParams) {\n  return useQuery({\n    queryKey: tenantKeys.list(params),\n    queryFn: () => listTenants(params),\n  });\n}\n\nexport function useTenant(tenantId: string) {\n  return useQuery({\n    queryKey: tenantKeys.detail(tenantId),\n    queryFn: () => getTenant(tenantId),\n    enabled: !!tenantId,\n  });\n}\n\n// ============================================================================\n// Tenant Mutations\n// ============================================================================\n\nexport function useCreateTenant() {\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: (data: AdminCreateTenantRequest) => createTenant(data),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: tenantKeys.lists() });\n    },\n    meta: {\n      successMessage: 'Tenant created successfully',\n    },\n  });\n}\n\nexport function useUpdateTenant() {\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: ({ tenantId, data }: { tenantId: string; data: UpdateTenantRequest }) =>\n      updateTenant(tenantId, data),\n    onSuccess: (_, { tenantId }) => {\n      queryClient.invalidateQueries({ queryKey: tenantKeys.detail(tenantId) });\n      queryClient.invalidateQueries({ queryKey: tenantKeys.lists() });\n    },\n    meta: {\n      successMessage: 'Tenant updated successfully',\n    },\n  });\n}\n\nexport function useSuspendTenant() {\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: (tenantId: string) => suspendTenant(tenantId),\n    onSuccess: (_, tenantId) => {\n      queryClient.invalidateQueries({ queryKey: tenantKeys.detail(tenantId) });\n      queryClient.invalidateQueries({ queryKey: tenantKeys.lists() });\n    },\n    meta: {\n      successMessage: 'Tenant suspended successfully',\n    },\n  });\n}\n\nexport function useReactivateTenant() {\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: (tenantId: string) => reactivateTenant(tenantId),\n    onSuccess: (_, tenantId) => {\n      queryClient.invalidateQueries({ queryKey: tenantKeys.detail(tenantId) });\n      queryClient.invalidateQueries({ queryKey: tenantKeys.lists() });\n    },\n    meta: {\n      successMessage: 'Tenant reactivated successfully',\n    },\n  });\n}\n\nexport function useDeleteTenant() {\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: (tenantId: string) => deleteTenant(tenantId),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: tenantKeys.lists() });\n    },\n    meta: {\n      successMessage: 'Tenant deleted successfully',\n    },\n  });\n}\n\n// ============================================================================\n// Tenant Members Queries & Mutations\n// ============================================================================\n\nexport function useTenantMembers(tenantId: string, params?: QueryParams) {\n  return useQuery({\n    queryKey: tenantKeys.members(tenantId),\n    queryFn: () => listTenantMembers(tenantId, params),\n    enabled: !!tenantId,\n  });\n}\n\nexport function useAddTenantMember() {\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: ({ tenantId, data }: { tenantId: string; data: AddTenantMemberRequest }) =>\n      addTenantMember(tenantId, data),\n    onSuccess: (_, { tenantId }) => {\n      queryClient.invalidateQueries({ queryKey: tenantKeys.members(tenantId) });\n    },\n    meta: {\n      successMessage: 'Member added successfully',\n    },\n  });\n}\n\nexport function useUpdateMemberRole() {\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: ({\n      tenantId,\n      userId,\n      data,\n    }: {\n      tenantId: string;\n      userId: string;\n      data: UpdateMemberRoleRequest;\n    }) => updateMemberRole(tenantId, userId, data),\n    onSuccess: (_, { tenantId }) => {\n      queryClient.invalidateQueries({ queryKey: tenantKeys.members(tenantId) });\n    },\n    meta: {\n      successMessage: 'Member role updated successfully',\n    },\n  });\n}\n\nexport function useRemoveTenantMember() {\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: ({ tenantId, userId }: { tenantId: string; userId: string }) =>\n      removeTenantMember(tenantId, userId),\n    onSuccess: (_, { tenantId }) => {\n      queryClient.invalidateQueries({ queryKey: tenantKeys.members(tenantId) });\n    },\n    meta: {\n      successMessage: 'Member removed successfully',\n    },\n  });\n}\n\n// ============================================================================\n// User Queries (for adding members)\n// ============================================================================\n\nexport function useUsers(params?: QueryParams) {\n  return useQuery({\n    queryKey: userKeys.list(params),\n    queryFn: () => listUsers(params),\n  });\n}\n\nexport function useSearchUsers(query: string) {\n  return useQuery({\n    queryKey: userKeys.search(query),\n    queryFn: () => searchUsers(query),\n    enabled: query.length >= 2,\n  });\n}\n"],"names":["listTenants","params","apiClient","getTenant","tenantId","createTenant","data","updateTenant","suspendTenant","reactivateTenant","deleteTenant","listTenantMembers","addTenantMember","updateMemberRole","userId","removeTenantMember","searchUsers","query","tenantKeys","id","userKeys","useTenants","useQuery","useTenant","useCreateTenant","queryClient","useQueryClient","useMutation","useUpdateTenant","_","useSuspendTenant","useReactivateTenant","useDeleteTenant","useTenantMembers","useAddTenantMember","useUpdateMemberRole","useRemoveTenantMember","useSearchUsers"],"mappings":"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"}