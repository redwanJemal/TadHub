{"version":3,"file":"hooks-cDJzJ6Ki.js","sources":["../../src/features/suppliers/api.ts","../../src/features/suppliers/hooks.ts"],"sourcesContent":["import { apiClient } from '@/shared/api/client';\nimport { getTenantId } from '@/features/auth/AuthProvider';\nimport type { QueryParams } from '@/shared/api/types/common';\nimport type {\n  TenantSupplier,\n  Supplier,\n  CreateSupplierRequest,\n  LinkSupplierRequest,\n  UpdateTenantSupplierRequest,\n} from './types';\n\nfunction tenantPath(path: string) {\n  const tenantId = getTenantId();\n  return `/tenants/${tenantId}${path}`;\n}\n\n// Tenant-scoped supplier relationships\nexport function listTenantSuppliers(params?: QueryParams) {\n  return apiClient.getPaged<TenantSupplier>(tenantPath('/suppliers'), {\n    ...params,\n    include: 'supplier',\n  });\n}\n\nexport function getTenantSupplier(id: string) {\n  return apiClient.get<TenantSupplier>(tenantPath(`/suppliers/${id}`), {\n    include: 'supplier',\n  });\n}\n\nexport function linkSupplier(data: LinkSupplierRequest) {\n  return apiClient.post<TenantSupplier>(tenantPath('/suppliers'), data);\n}\n\nexport function updateTenantSupplier(id: string, data: UpdateTenantSupplierRequest) {\n  return apiClient.patch<TenantSupplier>(tenantPath(`/suppliers/${id}`), data);\n}\n\nexport function unlinkSupplier(id: string) {\n  return apiClient.delete<void>(tenantPath(`/suppliers/${id}`));\n}\n\n// Create and link a supplier to the current tenant in one step\nexport function createAndLinkSupplier(data: CreateSupplierRequest) {\n  return apiClient.post<TenantSupplier>(tenantPath('/suppliers/create'), data);\n}\n\nexport function listSuppliers(params?: QueryParams) {\n  return apiClient.getPaged<Supplier>('/suppliers', params);\n}\n","import { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport type { QueryParams } from '@/shared/api/types/common';\nimport * as api from './api';\nimport type {\n  CreateSupplierRequest,\n  LinkSupplierRequest,\n  UpdateTenantSupplierRequest,\n} from './types';\n\nconst SUPPLIERS_KEY = 'tenant-suppliers';\n\nexport function useSuppliers(params?: QueryParams) {\n  return useQuery({\n    queryKey: [SUPPLIERS_KEY, params],\n    queryFn: () => api.listTenantSuppliers(params),\n  });\n}\n\nexport function useSupplier(id: string) {\n  return useQuery({\n    queryKey: [SUPPLIERS_KEY, id],\n    queryFn: () => api.getTenantSupplier(id),\n    enabled: !!id,\n  });\n}\n\nexport function useCreateAndLinkSupplier() {\n  const queryClient = useQueryClient();\n  return useMutation({\n    mutationFn: (data: CreateSupplierRequest) => api.createAndLinkSupplier(data),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [SUPPLIERS_KEY] });\n    },\n  });\n}\n\nexport function useLinkSupplier() {\n  const queryClient = useQueryClient();\n  return useMutation({\n    mutationFn: (data: LinkSupplierRequest) => api.linkSupplier(data),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [SUPPLIERS_KEY] });\n    },\n  });\n}\n\nexport function useUpdateTenantSupplier() {\n  const queryClient = useQueryClient();\n  return useMutation({\n    mutationFn: ({ id, data }: { id: string; data: UpdateTenantSupplierRequest }) =>\n      api.updateTenantSupplier(id, data),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [SUPPLIERS_KEY] });\n    },\n  });\n}\n\nexport function useUnlinkSupplier() {\n  const queryClient = useQueryClient();\n  return useMutation({\n    mutationFn: (id: string) => api.unlinkSupplier(id),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [SUPPLIERS_KEY] });\n    },\n  });\n}\n"],"names":["tenantPath","path","getTenantId","listTenantSuppliers","params","apiClient","updateTenantSupplier","id","data","unlinkSupplier","createAndLinkSupplier","SUPPLIERS_KEY","useSuppliers","useQuery","api.listTenantSuppliers","useCreateAndLinkSupplier","queryClient","useQueryClient","useMutation","api.createAndLinkSupplier","useUpdateTenantSupplier","api.updateTenantSupplier","useUnlinkSupplier","api.unlinkSupplier"],"mappings":"oEAWA,SAASA,EAAWC,EAAc,CAEhC,MAAO,YADUC,EAAA,CACU,GAAGD,CAAI,EACpC,CAGO,SAASE,EAAoBC,EAAsB,CACxD,OAAOC,EAAU,SAAyBL,EAAW,YAAY,EAAG,CAClE,GAAGI,EACH,QAAS,UAAA,CACV,CACH,CAYO,SAASE,EAAqBC,EAAYC,EAAmC,CAClF,OAAOH,EAAU,MAAsBL,EAAW,cAAcO,CAAE,EAAE,EAAGC,CAAI,CAC7E,CAEO,SAASC,EAAeF,EAAY,CACzC,OAAOF,EAAU,OAAaL,EAAW,cAAcO,CAAE,EAAE,CAAC,CAC9D,CAGO,SAASG,EAAsBF,EAA6B,CACjE,OAAOH,EAAU,KAAqBL,EAAW,mBAAmB,EAAGQ,CAAI,CAC7E,CCpCA,MAAMG,EAAgB,mBAEf,SAASC,EAAaR,EAAsB,CACjD,OAAOS,EAAS,CACd,SAAU,CAACF,EAAeP,CAAM,EAChC,QAAS,IAAMU,EAAwBV,CAAM,CAAA,CAC9C,CACH,CAUO,SAASW,GAA2B,CACzC,MAAMC,EAAcC,EAAA,EACpB,OAAOC,EAAY,CACjB,WAAaV,GAAgCW,EAA0BX,CAAI,EAC3E,UAAW,IAAM,CACfQ,EAAY,kBAAkB,CAAE,SAAU,CAACL,CAAa,EAAG,CAC7D,CAAA,CACD,CACH,CAYO,SAASS,GAA0B,CACxC,MAAMJ,EAAcC,EAAA,EACpB,OAAOC,EAAY,CACjB,WAAY,CAAC,CAAE,GAAAX,EAAI,KAAAC,KACjBa,EAAyBd,EAAIC,CAAI,EACnC,UAAW,IAAM,CACfQ,EAAY,kBAAkB,CAAE,SAAU,CAACL,CAAa,EAAG,CAC7D,CAAA,CACD,CACH,CAEO,SAASW,GAAoB,CAClC,MAAMN,EAAcC,EAAA,EACpB,OAAOC,EAAY,CACjB,WAAaX,GAAegB,EAAmBhB,CAAE,EACjD,UAAW,IAAM,CACfS,EAAY,kBAAkB,CAAE,SAAU,CAACL,CAAa,EAAG,CAC7D,CAAA,CACD,CACH"}