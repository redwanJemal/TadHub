{"version":3,"file":"DashboardPage-CwEEZ9vC.js","sources":["../../../node_modules/.pnpm/lucide-react@0.513.0_react@19.2.4/node_modules/lucide-react/dist/esm/icons/activity.js","../../../node_modules/.pnpm/lucide-react@0.513.0_react@19.2.4/node_modules/lucide-react/dist/esm/icons/circle-alert.js","../../../node_modules/.pnpm/lucide-react@0.513.0_react@19.2.4/node_modules/lucide-react/dist/esm/icons/clock.js","../../../node_modules/.pnpm/lucide-react@0.513.0_react@19.2.4/node_modules/lucide-react/dist/esm/icons/hard-drive.js","../../src/features/dashboard/DashboardPage.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.513.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2\",\n      key: \"169zse\"\n    }\n  ]\n];\nconst Activity = createLucideIcon(\"activity\", __iconNode);\n\nexport { __iconNode, Activity as default };\n//# sourceMappingURL=activity.js.map\n","/**\n * @license lucide-react v0.513.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"8\", y2: \"12\", key: \"1pkeuh\" }],\n  [\"line\", { x1: \"12\", x2: \"12.01\", y1: \"16\", y2: \"16\", key: \"4dfq90\" }]\n];\nconst CircleAlert = createLucideIcon(\"circle-alert\", __iconNode);\n\nexport { __iconNode, CircleAlert as default };\n//# sourceMappingURL=circle-alert.js.map\n","/**\n * @license lucide-react v0.513.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"polyline\", { points: \"12 6 12 12 16 14\", key: \"68esgv\" }]\n];\nconst Clock = createLucideIcon(\"clock\", __iconNode);\n\nexport { __iconNode, Clock as default };\n//# sourceMappingURL=clock.js.map\n","/**\n * @license lucide-react v0.513.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"line\", { x1: \"22\", x2: \"2\", y1: \"12\", y2: \"12\", key: \"1y58io\" }],\n  [\n    \"path\",\n    {\n      d: \"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z\",\n      key: \"oot6mr\"\n    }\n  ],\n  [\"line\", { x1: \"6\", x2: \"6.01\", y1: \"16\", y2: \"16\", key: \"sgf278\" }],\n  [\"line\", { x1: \"10\", x2: \"10.01\", y1: \"16\", y2: \"16\", key: \"1l4acy\" }]\n];\nconst HardDrive = createLucideIcon(\"hard-drive\", __iconNode);\n\nexport { __iconNode, HardDrive as default };\n//# sourceMappingURL=hard-drive.js.map\n","import { useEffect, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useAuth } from 'react-oidc-context';\nimport { Users, Activity, Key, HardDrive, Clock, AlertCircle } from 'lucide-react';\nimport { apiClient } from '../../shared/api';\nimport type { TenantDashboardResponse } from '../../shared/api/types';\n\nfunction formatBytes(bytes: number): string {\n  if (bytes === 0) return '0 B';\n  const k = 1024;\n  const sizes = ['B', 'KB', 'MB', 'GB', 'TB'];\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\n  return parseFloat((bytes / Math.pow(k, i)).toFixed(1)) + ' ' + sizes[i];\n}\n\nfunction formatRelativeTime(timestamp: string): string {\n  const date = new Date(timestamp);\n  const now = new Date();\n  const diffMs = now.getTime() - date.getTime();\n  const diffMins = Math.floor(diffMs / 60000);\n  const diffHours = Math.floor(diffMs / 3600000);\n  const diffDays = Math.floor(diffMs / 86400000);\n\n  if (diffMins < 1) return 'Just now';\n  if (diffMins < 60) return `${diffMins}m ago`;\n  if (diffHours < 24) return `${diffHours}h ago`;\n  if (diffDays < 7) return `${diffDays}d ago`;\n  return date.toLocaleDateString();\n}\n\nexport function DashboardPage() {\n  const { t } = useTranslation('dashboard');\n  const auth = useAuth();\n  const firstName = (auth.user?.profile?.given_name as string) || 'User';\n\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [dashboard, setDashboard] = useState<TenantDashboardResponse | null>(null);\n\n  useEffect(() => {\n    async function fetchDashboard() {\n      try {\n        setLoading(true);\n        const data = await apiClient.get<TenantDashboardResponse>('/bff/tenant/dashboard');\n        setDashboard(data);\n        setError(null);\n      } catch (err) {\n        console.error('Failed to fetch dashboard:', err);\n        setError('Failed to load dashboard data');\n      } finally {\n        setLoading(false);\n      }\n    }\n\n    fetchDashboard();\n  }, []);\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-[400px]\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary\"></div>\n      </div>\n    );\n  }\n\n  if (error || !dashboard) {\n    return (\n      <div className=\"flex flex-col items-center justify-center min-h-[400px] text-muted-foreground\">\n        <AlertCircle className=\"h-12 w-12 mb-4\" />\n        <p>{error || 'No data available'}</p>\n        <button\n          onClick={() => window.location.reload()}\n          className=\"mt-4 px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90\"\n        >\n          Retry\n        </button>\n      </div>\n    );\n  }\n\n  const stats = [\n    { label: t('stats.teamMembers'), value: dashboard.members.total.toString(), icon: Users },\n    { label: t('stats.activeUsers'), value: dashboard.members.active.toString(), icon: Activity },\n    { label: t('stats.apiKeys'), value: dashboard.metrics.totalApiKeys.toString(), icon: Key },\n    { \n      label: t('stats.storage'), \n      value: formatBytes(dashboard.metrics.storageUsedBytes), \n      icon: HardDrive,\n      subtitle: `/ ${formatBytes(dashboard.metrics.storageLimitBytes)}`\n    },\n  ];\n\n  return (\n    <div className=\"space-y-8\">\n      {/* Welcome header */}\n      <div>\n        <h1 className=\"text-2xl font-bold text-foreground\">\n          {t('welcome', { name: firstName })}\n        </h1>\n        <p className=\"text-muted-foreground mt-1\">{t('overview')}</p>\n      </div>\n\n      {/* Subscription banner */}\n      {dashboard.subscription.isTrialActive && dashboard.subscription.trialDaysRemaining !== null && (\n        <div className=\"rounded-xl bg-amber-500/10 border border-amber-500/20 p-4 flex items-center gap-3\">\n          <Clock className=\"h-5 w-5 text-amber-500\" />\n          <div>\n            <p className=\"font-medium text-foreground\">\n              Trial ends in {dashboard.subscription.trialDaysRemaining} days\n            </p>\n            <p className=\"text-sm text-muted-foreground\">\n              Upgrade to {dashboard.subscription.planName} to keep all features\n            </p>\n          </div>\n        </div>\n      )}\n\n      {/* Stats grid */}\n      <div className=\"grid gap-6 sm:grid-cols-2 lg:grid-cols-4\">\n        {stats.map((stat) => (\n          <div\n            key={stat.label}\n            className=\"rounded-xl bg-card border border-border p-6\"\n          >\n            <div className=\"flex items-center justify-between\">\n              <stat.icon className=\"h-5 w-5 text-primary\" />\n            </div>\n            <div className=\"mt-4\">\n              <p className=\"text-2xl font-bold text-foreground\">{stat.value}</p>\n              <p className=\"text-sm text-muted-foreground\">\n                {stat.label}\n                {'subtitle' in stat && (\n                  <span className=\"opacity-60\"> {stat.subtitle}</span>\n                )}\n              </p>\n            </div>\n          </div>\n        ))}\n      </div>\n\n      {/* Quick actions */}\n      <div className=\"rounded-xl bg-card border border-border p-6\">\n        <h2 className=\"text-lg font-semibold text-foreground mb-4\">\n          {t('quickActions')}\n        </h2>\n        <div className=\"grid gap-4 sm:grid-cols-2 lg:grid-cols-4\">\n          {Object.entries({\n            inviteTeam: t('actions.inviteTeam'),\n            createApiKey: t('actions.createApiKey'),\n            viewSettings: t('actions.viewSettings'),\n            viewBilling: t('actions.viewBilling'),\n          }).map(([key, label]) => (\n            <button\n              key={key}\n              className=\"rounded-lg border border-border p-4 text-left hover:bg-accent transition-colors\"\n            >\n              <p className=\"font-medium text-foreground\">{label}</p>\n            </button>\n          ))}\n        </div>\n      </div>\n\n      {/* Recent activity */}\n      <div className=\"rounded-xl bg-card border border-border p-6\">\n        <h2 className=\"text-lg font-semibold text-foreground mb-4\">\n          {t('recentActivity')}\n        </h2>\n        {dashboard.recentActivity.length === 0 ? (\n          <p className=\"text-muted-foreground\">{t('activity.noActivity')}</p>\n        ) : (\n          <div className=\"space-y-4\">\n            {dashboard.recentActivity.slice(0, 5).map((activity) => (\n              <div\n                key={activity.id}\n                className=\"flex items-start justify-between gap-4 py-3 border-b border-border last:border-0\"\n              >\n                <div>\n                  <p className=\"text-foreground\">\n                    <span className=\"font-medium\">{activity.actorName || 'System'}</span>\n                    {' '}{activity.action.toLowerCase()}{' '}\n                    {activity.entityName && (\n                      <span className=\"text-primary\">{activity.entityName}</span>\n                    )}\n                  </p>\n                  <p className=\"text-sm text-muted-foreground\">{activity.entityType}</p>\n                </div>\n                <p className=\"text-sm text-muted-foreground whitespace-nowrap\">\n                  {formatRelativeTime(activity.timestamp)}\n                </p>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":["__iconNode","Activity","createLucideIcon","CircleAlert","Clock","HardDrive","formatBytes","bytes","k","sizes","i","formatRelativeTime","timestamp","date","diffMs","diffMins","diffHours","diffDays","DashboardPage","t","useTranslation","firstName","_b","_a","useAuth","loading","setLoading","useState","error","setError","dashboard","setDashboard","useEffect","fetchDashboard","data","apiClient","err","jsx","jsxs","AlertCircle","stats","Users","Key","stat","key","label","activity"],"mappings":"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","x_google_ignoreList":[0,1,2,3]}