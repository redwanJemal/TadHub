import{c as ae,l as de,A as Ee,h as H,q as Le,m as ue,n as ne,o as re,t as $e,D as Ie,v as Fe,d as _,j as e,r as l,B as L,a as ie,p as Re,P as _e,z as Oe,w as me,x as xe}from"./index-3LWobmh4.js";import{S as Me,R as he,D as qe}from"./DataTableAdvanced-BaepryHP.js";import{D as He,a as Ve,E as Be,b as ze,c as X,k as Ue,T as je,A as ge,d as pe,e as ve,f as fe,g as ye,h as be,i as Ne,j as Ce}from"./alert-dialog-C58uG3WD.js";import{P as Ke}from"./PermissionGate-DepzuOZr.js";import{B as q,L as j}from"./label-C6xqjT5A.js";import{B as Qe}from"./ban-CAM-JbPt.js";import{B as Ge,D as We}from"./download-8P9IEK_b.js";import{C as Ye,E as Xe}from"./eye-CeiYeXqo.js";import{D as Ze,a as Je,b as et,c as tt,d as st,e as at}from"./dialog-dlmPZOCs.js";import{S as Z,b as J,c as ee,d as te,e as se,I as A}from"./select-DSHg5FKg.js";import{C,a as S,b as k,c as D}from"./card-zP3Z4qZO.js";import{S as E}from"./skeleton-CkBj2wMt.js";import{T as nt,a as rt,b as ce,c as oe}from"./tabs-CAZbEoeM.js";import{a as it}from"./hooks-BRevRwgr.js";import{b as lt}from"./hooks-CGY2_KMm.js";/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ct=[["path",{d:"M12.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v9.5",key:"1couwa"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M13.378 15.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"1y4qbx"}]],Se=ae("file-pen",ct);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ot=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],dt=ae("lock",ot);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],mt=ae("zap",ut);function V(t){return`/tenants/${de()}${t}`}function xt(t){return H.getPaged(V("/contracts"),t)}function ht(t,n){return H.get(V(`/contracts/${t}`),n)}function jt(t){return H.post(V("/contracts"),t)}function gt(t,n){return H.post(V(`/contracts/${t}/status`),n)}function pt(t){return H.delete(V(`/contracts/${t}`))}async function vt(t){const n=Le(),i=de(),s=`${Ee}/tenants/${i}/contracts/${t}/pdf`,c=await fetch(s,{method:"GET",headers:{...n?{Authorization:`Bearer ${n}`}:{},...i?{"X-Tenant-ID":i}:{}}});if(!c.ok)throw new Error(`Failed to download PDF: ${c.status}`);return c.blob()}const B="contracts";function ft(t){return ue({queryKey:[B,t],queryFn:()=>xt(t)})}function yt(t){return ue({queryKey:[B,t],queryFn:()=>ht(t,{include:"statusHistory"}),enabled:!!t})}function bt(){const t=ne();return re({mutationFn:n=>jt(n),onSuccess:()=>{t.invalidateQueries({queryKey:[B]})}})}function Nt(){const t=ne();return re({mutationFn:({id:n,data:i})=>gt(n,i),onSuccess:()=>{t.invalidateQueries({queryKey:[B]})}})}function De(){const t=ne();return re({mutationFn:n=>pt(n),onSuccess:()=>{t.invalidateQueries({queryKey:[B]})}})}const Ct={Draft:{variant:"secondary",icon:Se},Confirmed:{variant:"default",icon:Fe},OnProbation:{variant:"warning",icon:Me},Active:{variant:"success",icon:Ge},Completed:{variant:"default",icon:Ie},Terminated:{variant:"destructive",icon:$e},Cancelled:{variant:"destructive",icon:Qe},Closed:{variant:"secondary",icon:dt}},St=["Draft","Confirmed","OnProbation","Active","Completed","Terminated","Cancelled","Closed"],we=["Traditional","Temporary","Flexible"],Dt={Traditional:{variant:"default",icon:Se},Temporary:{variant:"warning",icon:Ye},Flexible:{variant:"outline",icon:mt}},ke={Draft:["Confirmed","Cancelled"],Confirmed:["OnProbation","Active","Cancelled"],OnProbation:["Active","Terminated","Cancelled"],Active:["Completed","Terminated"],Completed:["Closed"],Terminated:["Closed"]},wt=["Terminated","Cancelled"],kt=["Monthly","Daily","Hourly"];function R({status:t}){const{t:n}=_("contracts"),i=Ct[t];if(!i)return e.jsx(q,{variant:"outline",children:t});const s=i.icon;return e.jsxs(q,{variant:i.variant,children:[e.jsx(s,{className:"me-1 h-3 w-3"}),n(`status.${t}`)]})}function Te({type:t}){const{t:n}=_("contracts"),i=Dt[t];if(!i)return e.jsx(q,{variant:"outline",children:t});const s=i.icon;return e.jsxs(q,{variant:i.variant,children:[e.jsx(s,{className:"me-1 h-3 w-3"}),n(`type.${t}`)]})}function Pe({open:t,onOpenChange:n,contractId:i,currentStatus:s}){const{t:c}=_("contracts"),[m,g]=l.useState(""),[h,T]=l.useState(""),[f,w]=l.useState(""),p=Nt(),P=wt.includes(m),y=m&&(!P||h.trim()),$=ke[s]??[],b=async()=>{y&&(await p.mutateAsync({id:i,data:{status:m,reason:h.trim()||void 0,notes:f.trim()||void 0}}),g(""),T(""),w(""),n(!1))},N=o=>{o||(g(""),T(""),w("")),n(o)};return e.jsx(Ze,{open:t,onOpenChange:N,children:e.jsxs(Je,{children:[e.jsxs(et,{children:[e.jsx(tt,{children:c("transition.title")}),e.jsx(st,{children:c("transition.description")})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{children:c("transition.currentStatus")}),e.jsx("div",{children:e.jsx(R,{status:s})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{children:c("transition.targetStatus")}),e.jsxs(Z,{value:m,onValueChange:g,children:[e.jsx(J,{children:e.jsx(ee,{placeholder:c("transition.targetStatusPlaceholder")})}),e.jsx(te,{children:$.map(o=>e.jsx(se,{value:o,children:e.jsx(R,{status:o})},o))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(j,{children:[c("transition.reason"),P&&e.jsx("span",{className:"text-destructive",children:" *"})]}),e.jsx("textarea",{className:"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",placeholder:c("transition.reasonPlaceholder"),value:h,onChange:o=>T(o.target.value)}),P&&!h.trim()&&e.jsx("p",{className:"text-sm text-destructive",children:c("transition.reasonRequired")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{children:c("transition.notes")}),e.jsx("textarea",{className:"flex min-h-[60px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",placeholder:c("transition.notesPlaceholder"),value:f,onChange:o=>w(o.target.value)})]})]}),e.jsxs(at,{children:[e.jsx(L,{variant:"outline",onClick:()=>N(!1),children:c("common:cancel")}),e.jsx(L,{onClick:b,disabled:!y||p.isPending,children:p.isPending?c("transition.submitting"):c("transition.submit")})]})]})})}function zt(){const{t}=_("contracts"),n=ie(),{hasPermission:i}=Re(),[s,c]=l.useState(""),[m,g]=l.useState(1),[h,T]=l.useState(20),[f,w]=l.useState([]),[p,P]=l.useState(),[y,$]=l.useState(),[b,N]=l.useState(null),[o,x]=l.useState(null),I=l.useMemo(()=>({page:m,pageSize:h,search:s||void 0,sort:"-createdAt","filter[status]":p,"filter[type]":y}),[m,h,s,p,y]),{data:u,isLoading:z,refetch:K}=ft(I),O=De(),Q=async()=>{b&&(await O.mutateAsync(b.id),N(null))},U=[{key:"status",label:t("filters.status"),options:St.map(r=>({label:t(`status.${r}`),value:r})),value:p},{key:"type",label:t("filters.type"),options:we.map(r=>({label:t(`type.${r}`),value:r})),value:y}],G=(r,v)=>{r==="status"&&P(v),r==="type"&&$(v),g(1)},M=[{key:"contractCode",header:t("columns.contractCode"),cell:r=>e.jsx("span",{className:"font-mono text-sm",children:r.contractCode})},{key:"type",header:t("columns.type"),cell:r=>e.jsx(Te,{type:r.type})},{key:"worker",header:t("columns.worker"),cell:r=>{var v,F;return e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"font-medium truncate",children:((v=r.worker)==null?void 0:v.fullNameEn)??"—"}),((F=r.worker)==null?void 0:F.workerCode)&&e.jsx("p",{className:"text-xs text-muted-foreground font-mono",children:r.worker.workerCode})]})}},{key:"client",header:t("columns.client"),cell:r=>{var v;return((v=r.client)==null?void 0:v.nameEn)??"—"}},{key:"status",header:t("columns.status"),cell:r=>e.jsx(R,{status:r.status})},{key:"startDate",header:t("columns.startDate"),cell:r=>r.startDate?new Date(r.startDate).toLocaleDateString():"—"},{key:"rate",header:t("columns.rate"),cell:r=>e.jsxs("span",{children:[r.rate.toLocaleString()," ",r.currency,"/",t(`ratePeriod.${r.ratePeriod}`)]})},{key:"actions",header:t("columns.actions"),className:"w-[70px]",cell:r=>e.jsxs(He,{children:[e.jsx(Ve,{asChild:!0,children:e.jsx(L,{variant:"ghost",size:"icon",className:"h-8 w-8",children:e.jsx(Be,{className:"h-4 w-4"})})}),e.jsxs(ze,{align:"end",children:[e.jsxs(X,{onClick:()=>n(`/contracts/${r.id}`),children:[e.jsx(Xe,{className:"me-2 h-4 w-4"}),t("actions.view")]}),i("contracts.manage_status")&&e.jsxs(X,{onClick:()=>x(r),children:[e.jsx(he,{className:"me-2 h-4 w-4"}),t("actions.changeStatus")]}),i("contracts.delete")&&e.jsxs(e.Fragment,{children:[e.jsx(Ue,{}),e.jsxs(X,{className:"text-destructive",onClick:()=>N(r),children:[e.jsx(je,{className:"me-2 h-4 w-4"}),t("actions.delete")]})]})]})]})}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:t("title")}),e.jsx("p",{className:"text-muted-foreground",children:t("description")})]}),e.jsx(Ke,{permission:"contracts.create",children:e.jsxs(L,{onClick:()=>n("/contracts/new"),children:[e.jsx(_e,{className:"me-2 h-4 w-4"}),t("addContract")]})})]}),e.jsx(qe,{columns:M,data:(u==null?void 0:u.items)??[],isLoading:z,selectable:!0,selectedIds:f,onSelectionChange:w,searchPlaceholder:t("searchPlaceholder"),searchValue:s,onSearchChange:r=>{c(r),g(1)},filters:U,onFilterChange:G,page:m,totalPages:u==null?void 0:u.totalPages,total:u==null?void 0:u.totalCount,pageSize:h,onPageChange:g,onPageSizeChange:T,onRefresh:()=>K(),emptyVariant:"default",emptyTitle:t("empty.title"),emptyDescription:t("empty.description")}),o&&e.jsx(Pe,{open:!!o,onOpenChange:r=>{r||x(null)},contractId:o.id,currentStatus:o.status}),e.jsx(ge,{open:!!b,onOpenChange:()=>N(null),children:e.jsxs(pe,{children:[e.jsxs(ve,{children:[e.jsx(fe,{children:t("deleteDialog.title")}),e.jsx(ye,{children:t("deleteDialog.description")})]}),e.jsxs(be,{children:[e.jsx(Ne,{children:t("common:cancel")}),e.jsx(Ce,{onClick:Q,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:t("deleteDialog.confirm")})]})]})})]})}function d({label:t,value:n}){const i=typeof n=="boolean"?n?"Yes":"No":n;return e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:t}),e.jsx("p",{className:"font-medium",children:i!=null&&i!==""?String(i):"—"})]})}function Tt(){return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(E,{className:"h-4 w-32 mb-4"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(E,{className:"h-8 w-64"}),e.jsx(E,{className:"h-6 w-24"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{className:"h-9 w-32"}),e.jsx(E,{className:"h-9 w-32"})]})]})]}),e.jsx(E,{className:"h-10 w-96"}),e.jsx("div",{className:"grid gap-6 md:grid-cols-2",children:Array.from({length:4}).map((t,n)=>e.jsxs(C,{children:[e.jsx(S,{children:e.jsx(E,{className:"h-6 w-40"})}),e.jsx(D,{className:"grid gap-4 sm:grid-cols-2",children:Array.from({length:4}).map((i,s)=>e.jsxs("div",{children:[e.jsx(E,{className:"h-4 w-24 mb-1"}),e.jsx(E,{className:"h-5 w-40"})]},s))})]},n))})]})}function Ut(){var b,N,o;const{t}=_("contracts"),{id:n}=Oe(),i=ie(),{data:s,isLoading:c}=yt(n),m=De(),[g,h]=l.useState(!1),[T,f]=l.useState(!1),[w,p]=l.useState(!1),P=async()=>{if(n){p(!0);try{const x=await vt(n),I=URL.createObjectURL(x),u=document.createElement("a");u.href=I,u.download=`Contract-${(s==null?void 0:s.contractCode)??n}.pdf`,document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(I)}catch{}finally{p(!1)}}},y=async()=>{n&&(await m.mutateAsync(n),i("/contracts"))};if(c)return e.jsx(Tt,{});if(!s)return e.jsx("div",{className:"flex items-center justify-center min-h-[40vh]",children:e.jsx("p",{className:"text-muted-foreground",children:t("common:noResults")})});const $=(((b=ke[s.status])==null?void 0:b.length)??0)>0;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs(me,{to:"/contracts",className:"inline-flex items-center gap-1 text-sm text-muted-foreground hover:text-foreground mb-4",children:[e.jsx(xe,{className:"h-4 w-4"}),t("detail.backToList")]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:s.contractCode}),s.worker&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:[s.worker.fullNameEn," — ",(N=s.client)==null?void 0:N.nameEn]})]}),e.jsx(R,{status:s.status}),e.jsx(Te,{type:s.type})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(L,{variant:"outline",onClick:P,disabled:w,children:[e.jsx(We,{className:"me-2 h-4 w-4"}),t(w?"actions.downloading":"actions.downloadPdf")]}),$&&e.jsxs(L,{variant:"outline",onClick:()=>h(!0),children:[e.jsx(he,{className:"me-2 h-4 w-4"}),t("actions.changeStatus")]}),e.jsxs(L,{variant:"destructive",onClick:()=>f(!0),children:[e.jsx(je,{className:"me-2 h-4 w-4"}),t("actions.delete")]})]})]})]}),e.jsxs(nt,{defaultValue:"overview",className:"space-y-6",children:[e.jsxs(rt,{children:[e.jsx(ce,{value:"overview",children:t("tabs.overview")}),e.jsxs(ce,{value:"statusHistory",children:[t("tabs.statusHistory"),s.statusHistory&&e.jsx(q,{variant:"secondary",className:"ms-2",children:s.statusHistory.length})]})]}),e.jsx(oe,{value:"overview",className:"space-y-6",children:e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(C,{children:[e.jsx(S,{children:e.jsx(k,{children:t("detail.parties")})}),e.jsxs(D,{className:"grid gap-4 sm:grid-cols-2",children:[e.jsx(d,{label:t("detail.contractCode"),value:s.contractCode}),e.jsx(d,{label:t("detail.type"),value:t(`type.${s.type}`)}),e.jsx(d,{label:t("detail.worker"),value:s.worker?`${s.worker.fullNameEn} (${s.worker.workerCode})`:void 0}),e.jsx(d,{label:t("detail.client"),value:(o=s.client)==null?void 0:o.nameEn})]})]}),e.jsxs(C,{children:[e.jsx(S,{children:e.jsx(k,{children:t("detail.dates")})}),e.jsxs(D,{className:"grid gap-4 sm:grid-cols-2",children:[e.jsx(d,{label:t("detail.startDate"),value:s.startDate?new Date(s.startDate).toLocaleDateString():void 0}),e.jsx(d,{label:t("detail.endDate"),value:s.endDate?new Date(s.endDate).toLocaleDateString():void 0}),e.jsx(d,{label:t("detail.probationEndDate"),value:s.probationEndDate?new Date(s.probationEndDate).toLocaleDateString():void 0}),e.jsx(d,{label:t("detail.guaranteeEndDate"),value:s.guaranteeEndDate?new Date(s.guaranteeEndDate).toLocaleDateString():void 0}),e.jsx(d,{label:t("detail.probationPassed"),value:s.probationPassed})]})]}),e.jsxs(C,{children:[e.jsx(S,{children:e.jsx(k,{children:t("detail.financial")})}),e.jsxs(D,{className:"grid gap-4 sm:grid-cols-2",children:[e.jsx(d,{label:t("detail.rate"),value:`${s.rate.toLocaleString()} ${s.currency}`}),e.jsx(d,{label:t("detail.ratePeriod"),value:t(`ratePeriod.${s.ratePeriod}`)}),e.jsx(d,{label:t("detail.totalValue"),value:s.totalValue?`${s.totalValue.toLocaleString()} ${s.currency}`:void 0})]})]}),s.terminatedAt&&e.jsxs(C,{children:[e.jsx(S,{children:e.jsx(k,{children:t("detail.termination")})}),e.jsxs(D,{className:"grid gap-4 sm:grid-cols-2",children:[e.jsx(d,{label:t("detail.terminatedAt"),value:new Date(s.terminatedAt).toLocaleString()}),e.jsx(d,{label:t("detail.terminationReason"),value:s.terminationReason}),e.jsx(d,{label:t("detail.terminatedBy"),value:s.terminatedBy})]})]}),e.jsxs(C,{children:[e.jsx(S,{children:e.jsx(k,{children:t("detail.operational")})}),e.jsxs(D,{className:"grid gap-4 sm:grid-cols-2",children:[e.jsx(d,{label:t("detail.createdAt"),value:new Date(s.createdAt).toLocaleString()}),e.jsx(d,{label:t("detail.updatedAt"),value:new Date(s.updatedAt).toLocaleString()}),e.jsx("div",{className:"sm:col-span-2",children:e.jsx(d,{label:t("detail.notes"),value:s.notes})})]})]})]})}),e.jsx(oe,{value:"statusHistory",className:"space-y-6",children:s.statusHistory&&s.statusHistory.length>0?e.jsxs(C,{children:[e.jsx(S,{children:e.jsx(k,{children:t("detail.statusHistory")})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-4",children:s.statusHistory.map(x=>e.jsx("div",{className:"flex items-start gap-3 border-s-2 border-muted ps-4 pb-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[x.fromStatus&&e.jsxs(e.Fragment,{children:[e.jsx(R,{status:x.fromStatus}),e.jsx("span",{className:"text-muted-foreground",children:"→"})]}),e.jsx(R,{status:x.toStatus})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(x.changedAt).toLocaleString()}),x.reason&&e.jsx("p",{className:"text-sm mt-1",children:x.reason}),x.notes&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:x.notes})]})},x.id))})})]}):e.jsx("div",{className:"flex items-center justify-center min-h-[20vh]",children:e.jsx("p",{className:"text-muted-foreground",children:t("detail.notAvailable")})})})]}),e.jsx(Pe,{open:g,onOpenChange:h,contractId:s.id,currentStatus:s.status}),e.jsx(ge,{open:T,onOpenChange:f,children:e.jsxs(pe,{children:[e.jsxs(ve,{children:[e.jsx(fe,{children:t("deleteDialog.title")}),e.jsx(ye,{children:t("deleteDialog.description")})]}),e.jsxs(be,{children:[e.jsx(Ne,{children:t("common:cancel")}),e.jsx(Ce,{onClick:y,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:t("deleteDialog.confirm")})]})]})})]})}function Kt(){const{t}=_("contracts"),n=ie(),i=bt(),[s,c]=l.useState(""),[m,g]=l.useState(""),[h,T]=l.useState(""),[f,w]=l.useState(""),[p,P]=l.useState(""),[y,$]=l.useState(""),[b,N]=l.useState(""),[o,x]=l.useState(""),[I,u]=l.useState("Monthly"),[z,K]=l.useState("AED"),[O,Q]=l.useState(""),[U,G]=l.useState(""),[M,r]=l.useState(""),{data:v}=it({pageSize:50,search:M||void 0,"filter[status]":"Available"}),[F,W]=l.useState(""),{data:Y}=lt({pageSize:50,search:F||void 0,"filter[isActive]":"true"}),le=s&&m&&h&&f&&o,Ae=async()=>{le&&(await i.mutateAsync({workerId:s,clientId:m,type:h,startDate:f,endDate:p||void 0,probationEndDate:y||void 0,guaranteeEndDate:b||void 0,rate:parseFloat(o),ratePeriod:I,currency:z,totalValue:O?parseFloat(O):void 0,notes:U.trim()||void 0}),n("/contracts"))};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs(me,{to:"/contracts",className:"inline-flex items-center gap-1 text-sm text-muted-foreground hover:text-foreground mb-4",children:[e.jsx(xe,{className:"h-4 w-4"}),t("create.backToList")]}),e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:t("create.title")}),e.jsx("p",{className:"text-muted-foreground",children:t("create.description")})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(C,{children:[e.jsx(S,{children:e.jsx(k,{children:t("detail.parties")})}),e.jsxs(D,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(j,{children:[t("create.worker")," *"]}),e.jsx(A,{placeholder:t("create.workerPlaceholder"),value:M,onChange:a=>{r(a.target.value),s&&c("")}}),v&&v.items.length>0&&M&&!s&&e.jsx("div",{className:"border rounded-md max-h-40 overflow-y-auto",children:v.items.map(a=>e.jsxs("button",{type:"button",className:"w-full text-start px-3 py-2 hover:bg-muted text-sm",onClick:()=>{c(a.id),r(`${a.fullNameEn} (${a.workerCode})`)},children:[e.jsx("span",{className:"font-medium",children:a.fullNameEn}),e.jsx("span",{className:"text-muted-foreground ms-2 font-mono text-xs",children:a.workerCode})]},a.id))}),s&&e.jsx("button",{type:"button",className:"text-xs text-muted-foreground hover:text-foreground",onClick:()=>{c(""),r("")},children:t("common:cancel")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(j,{children:[t("create.client")," *"]}),e.jsx(A,{placeholder:t("create.clientPlaceholder"),value:F,onChange:a=>{W(a.target.value),m&&g("")}}),Y&&Y.items.length>0&&F&&!m&&e.jsx("div",{className:"border rounded-md max-h-40 overflow-y-auto",children:Y.items.map(a=>e.jsxs("button",{type:"button",className:"w-full text-start px-3 py-2 hover:bg-muted text-sm",onClick:()=>{g(a.id),W(a.nameEn)},children:[e.jsx("span",{className:"font-medium",children:a.nameEn}),a.nameAr&&e.jsx("span",{className:"text-muted-foreground ms-2 text-xs",dir:"rtl",children:a.nameAr})]},a.id))}),m&&e.jsx("button",{type:"button",className:"text-xs text-muted-foreground hover:text-foreground",onClick:()=>{g(""),W("")},children:t("common:cancel")})]})]})]}),e.jsxs(C,{children:[e.jsx(S,{children:e.jsx(k,{children:t("detail.overview")})}),e.jsxs(D,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(j,{children:[t("create.type")," *"]}),e.jsxs(Z,{value:h,onValueChange:T,children:[e.jsx(J,{children:e.jsx(ee,{placeholder:t("create.typePlaceholder")})}),e.jsx(te,{children:we.map(a=>e.jsx(se,{value:a,children:t(`type.${a}`)},a))})]})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(j,{children:[t("create.startDate")," *"]}),e.jsx(A,{type:"date",value:f,onChange:a=>w(a.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{children:t("create.endDate")}),e.jsx(A,{type:"date",value:p,onChange:a=>P(a.target.value)})]})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{children:t("create.probationEndDate")}),e.jsx(A,{type:"date",value:y,onChange:a=>$(a.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{children:t("create.guaranteeEndDate")}),e.jsx(A,{type:"date",value:b,onChange:a=>N(a.target.value)})]})]})]})]}),e.jsxs(C,{children:[e.jsx(S,{children:e.jsx(k,{children:t("detail.financial")})}),e.jsxs(D,{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(j,{children:[t("create.rate")," *"]}),e.jsx(A,{type:"number",min:"0",step:"0.01",value:o,onChange:a=>x(a.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{children:t("create.ratePeriod")}),e.jsxs(Z,{value:I,onValueChange:u,children:[e.jsx(J,{children:e.jsx(ee,{placeholder:t("create.ratePeriodPlaceholder")})}),e.jsx(te,{children:kt.map(a=>e.jsx(se,{value:a,children:t(`ratePeriod.${a}`)},a))})]})]})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{children:t("create.currency")}),e.jsx(A,{value:z,onChange:a=>K(a.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{children:t("create.totalValue")}),e.jsx(A,{type:"number",min:"0",step:"0.01",value:O,onChange:a=>Q(a.target.value)})]})]})]})]}),e.jsxs(C,{children:[e.jsx(S,{children:e.jsx(k,{children:t("create.notes")})}),e.jsx(D,{children:e.jsx("textarea",{className:"flex min-h-[100px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",placeholder:t("create.notesPlaceholder"),value:U,onChange:a=>G(a.target.value)})})]})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(L,{variant:"outline",onClick:()=>n("/contracts"),children:t("common:cancel")}),e.jsx(L,{onClick:Ae,disabled:!le||i.isPending,children:i.isPending?t("create.submitting"):t("create.submit")})]})]})}export{Ut as ContractDetailPage,zt as ContractsPage,Kt as CreateContractPage};
//# sourceMappingURL=index-Cn0eUNQn.js.map
