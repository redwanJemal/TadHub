{"version":3,"file":"index-e_Is6BP0.js","sources":["../../src/features/reference-data/api/reference-data-api.ts","../../src/features/reference-data/hooks/use-reference-data.ts","../../src/features/reference-data/types/index.ts"],"sourcesContent":["import { apiClient } from '@/shared/api/client';\nimport type {\n  JobCategoryDto,\n  JobCategoryRefDto,\n  CountryDto,\n  CountryRefDto,\n  PagedList,\n  JobCategoryFilterParams,\n  CountryFilterParams,\n} from '../types';\n\n// =============================================================================\n// Job Categories API\n// =============================================================================\n\nexport const jobCategoriesApi = {\n  /**\n   * List job categories with filtering and pagination\n   */\n  async list(params: JobCategoryFilterParams = {}): Promise<PagedList<JobCategoryDto>> {\n    const query: Record<string, unknown> = {};\n    \n    if (params.page) query['page'] = params.page;\n    if (params.pageSize) query['pageSize'] = params.pageSize;\n    if (params.sort) query['sort'] = params.sort;\n    \n    const filter: Record<string, string> = {};\n    if (params.moHRECode) filter['moHRECode'] = params.moHRECode;\n    if (params.isActive !== undefined) filter['isActive'] = String(params.isActive);\n    \n    if (Object.keys(filter).length > 0) {\n      query['filter'] = filter;\n    }\n\n    return apiClient.get<PagedList<JobCategoryDto>>('/job-categories', query);\n  },\n\n  /**\n   * Get all active job categories (no pagination)\n   */\n  async getAll(): Promise<JobCategoryDto[]> {\n    return apiClient.get<JobCategoryDto[]>('/job-categories/all');\n  },\n\n  /**\n   * Get lightweight refs for dropdowns\n   */\n  async getRefs(): Promise<JobCategoryRefDto[]> {\n    return apiClient.get<JobCategoryRefDto[]>('/job-categories/refs');\n  },\n\n  /**\n   * Get job category by ID\n   */\n  async getById(id: string): Promise<JobCategoryDto> {\n    return apiClient.get<JobCategoryDto>(`/job-categories/${id}`);\n  },\n\n  /**\n   * Get job category by MoHRE code\n   */\n  async getByCode(code: string): Promise<JobCategoryDto> {\n    return apiClient.get<JobCategoryDto>(`/job-categories/by-code/${code}`);\n  },\n};\n\n// =============================================================================\n// Countries API\n// =============================================================================\n\nexport const countriesApi = {\n  /**\n   * List countries with filtering and pagination\n   */\n  async list(params: CountryFilterParams = {}): Promise<PagedList<CountryDto>> {\n    const query: Record<string, unknown> = {};\n    \n    if (params.page) query['page'] = params.page;\n    if (params.pageSize) query['pageSize'] = params.pageSize;\n    if (params.sort) query['sort'] = params.sort;\n    \n    const filter: Record<string, string> = {};\n    if (params.code) filter['code'] = params.code;\n    if (params.isActive !== undefined) filter['isActive'] = String(params.isActive);\n    if (params.isCommonNationality !== undefined) {\n      filter['isCommonNationality'] = String(params.isCommonNationality);\n    }\n    \n    if (Object.keys(filter).length > 0) {\n      query['filter'] = filter;\n    }\n\n    return apiClient.get<PagedList<CountryDto>>('/countries', query);\n  },\n\n  /**\n   * Get lightweight refs for dropdowns\n   */\n  async getRefs(): Promise<CountryRefDto[]> {\n    return apiClient.get<CountryRefDto[]>('/countries/refs');\n  },\n\n  /**\n   * Get common Tadbeer nationalities (top 10)\n   */\n  async getCommonNationalities(): Promise<CountryRefDto[]> {\n    return apiClient.get<CountryRefDto[]>('/countries/common-nationalities');\n  },\n\n  /**\n   * Get country by ID\n   */\n  async getById(id: string): Promise<CountryDto> {\n    return apiClient.get<CountryDto>(`/countries/${id}`);\n  },\n\n  /**\n   * Get country by ISO alpha-2 code\n   */\n  async getByCode(code: string): Promise<CountryDto> {\n    return apiClient.get<CountryDto>(`/countries/by-code/${code}`);\n  },\n};\n","import { useQuery } from '@tanstack/react-query';\nimport { jobCategoriesApi, countriesApi } from '../api/reference-data-api';\nimport type { JobCategoryFilterParams, CountryFilterParams } from '../types';\n\n// =============================================================================\n// Query Keys\n// =============================================================================\n\nexport const jobCategoryKeys = {\n  all: ['jobCategories'] as const,\n  lists: () => [...jobCategoryKeys.all, 'list'] as const,\n  list: (params: JobCategoryFilterParams) => [...jobCategoryKeys.lists(), params] as const,\n  allActive: () => [...jobCategoryKeys.all, 'all'] as const,\n  refs: () => [...jobCategoryKeys.all, 'refs'] as const,\n  details: () => [...jobCategoryKeys.all, 'detail'] as const,\n  detail: (id: string) => [...jobCategoryKeys.details(), id] as const,\n  byCode: (code: string) => [...jobCategoryKeys.all, 'byCode', code] as const,\n};\n\nexport const countryKeys = {\n  all: ['countries'] as const,\n  lists: () => [...countryKeys.all, 'list'] as const,\n  list: (params: CountryFilterParams) => [...countryKeys.lists(), params] as const,\n  refs: () => [...countryKeys.all, 'refs'] as const,\n  commonNationalities: () => [...countryKeys.all, 'commonNationalities'] as const,\n  details: () => [...countryKeys.all, 'detail'] as const,\n  detail: (id: string) => [...countryKeys.details(), id] as const,\n  byCode: (code: string) => [...countryKeys.all, 'byCode', code] as const,\n};\n\n// Cache for 24 hours - reference data rarely changes\nconst STALE_TIME = 24 * 60 * 60 * 1000;\n\n// =============================================================================\n// Job Category Hooks\n// =============================================================================\n\n/**\n * Fetch paginated job categories\n */\nexport function useJobCategories(params: JobCategoryFilterParams = {}) {\n  return useQuery({\n    queryKey: jobCategoryKeys.list(params),\n    queryFn: () => jobCategoriesApi.list(params),\n    staleTime: STALE_TIME,\n  });\n}\n\n/**\n * Fetch all active job categories (no pagination)\n */\nexport function useAllJobCategories() {\n  return useQuery({\n    queryKey: jobCategoryKeys.allActive(),\n    queryFn: () => jobCategoriesApi.getAll(),\n    staleTime: STALE_TIME,\n  });\n}\n\n/**\n * Fetch lightweight job category refs for dropdowns\n */\nexport function useJobCategoryRefs() {\n  return useQuery({\n    queryKey: jobCategoryKeys.refs(),\n    queryFn: () => jobCategoriesApi.getRefs(),\n    staleTime: STALE_TIME,\n  });\n}\n\n/**\n * Fetch single job category by ID\n */\nexport function useJobCategory(id: string) {\n  return useQuery({\n    queryKey: jobCategoryKeys.detail(id),\n    queryFn: () => jobCategoriesApi.getById(id),\n    enabled: !!id,\n    staleTime: STALE_TIME,\n  });\n}\n\n/**\n * Fetch job category by MoHRE code\n */\nexport function useJobCategoryByCode(code: string) {\n  return useQuery({\n    queryKey: jobCategoryKeys.byCode(code),\n    queryFn: () => jobCategoriesApi.getByCode(code),\n    enabled: !!code,\n    staleTime: STALE_TIME,\n  });\n}\n\n// =============================================================================\n// Country Hooks\n// =============================================================================\n\n/**\n * Fetch paginated countries\n */\nexport function useCountries(params: CountryFilterParams = {}) {\n  return useQuery({\n    queryKey: countryKeys.list(params),\n    queryFn: () => countriesApi.list(params),\n    staleTime: STALE_TIME,\n  });\n}\n\n/**\n * Fetch lightweight country refs for dropdowns\n */\nexport function useCountryRefs() {\n  return useQuery({\n    queryKey: countryKeys.refs(),\n    queryFn: () => countriesApi.getRefs(),\n    staleTime: STALE_TIME,\n  });\n}\n\n/**\n * Fetch common Tadbeer nationalities (top 10)\n */\nexport function useCommonNationalities() {\n  return useQuery({\n    queryKey: countryKeys.commonNationalities(),\n    queryFn: () => countriesApi.getCommonNationalities(),\n    staleTime: STALE_TIME,\n  });\n}\n\n/**\n * Fetch single country by ID\n */\nexport function useCountry(id: string) {\n  return useQuery({\n    queryKey: countryKeys.detail(id),\n    queryFn: () => countriesApi.getById(id),\n    enabled: !!id,\n    staleTime: STALE_TIME,\n  });\n}\n\n/**\n * Fetch country by ISO code\n */\nexport function useCountryByCode(code: string) {\n  return useQuery({\n    queryKey: countryKeys.byCode(code),\n    queryFn: () => countriesApi.getByCode(code),\n    enabled: !!code,\n    staleTime: STALE_TIME,\n  });\n}\n","/**\n * Reference Data Types\n * Global lookup data for Countries and Job Categories\n */\n\n// =============================================================================\n// Job Categories (MoHRE)\n// =============================================================================\n\n/**\n * Full Job Category DTO\n */\nexport interface JobCategoryDto {\n  id: string;\n  moHRECode: string;\n  nameEn: string;\n  nameAr: string;\n  isActive: boolean;\n  displayOrder: number;\n}\n\n/**\n * Lightweight Job Category reference for dropdowns\n */\nexport interface JobCategoryRefDto {\n  id: string;\n  moHRECode: string;\n  nameEn: string;\n  nameAr: string;\n}\n\n// =============================================================================\n// Countries (ISO 3166-1)\n// =============================================================================\n\n/**\n * Full Country DTO\n */\nexport interface CountryDto {\n  id: string;\n  code: string;           // ISO alpha-2 (e.g., \"AE\")\n  alpha3Code: string;     // ISO alpha-3 (e.g., \"ARE\")\n  nameEn: string;\n  nameAr: string;\n  nationalityEn: string;  // e.g., \"Emirati\"\n  nationalityAr: string;  // e.g., \"Ø¥Ù…Ø§Ø±Ø§ØªÙŠ\"\n  dialingCode: string;    // e.g., \"+971\"\n  isActive: boolean;\n  displayOrder: number;\n}\n\n/**\n * Lightweight Country reference for dropdowns\n */\nexport interface CountryRefDto {\n  id: string;\n  code: string;\n  nameEn: string;\n  nameAr: string;\n}\n\n// Re-export PagedList from shared types for backwards compatibility\nexport type { PagedList } from '@/shared/api/types';\n\n// =============================================================================\n// Filter Parameters\n// =============================================================================\n\nexport interface JobCategoryFilterParams {\n  page?: number;\n  pageSize?: number;\n  sort?: string;\n  moHRECode?: string;\n  isActive?: boolean;\n}\n\nexport interface CountryFilterParams {\n  page?: number;\n  pageSize?: number;\n  sort?: string;\n  code?: string;\n  isActive?: boolean;\n  isCommonNationality?: boolean;\n}\n\n// =============================================================================\n// Country Flag Emoji Helper\n// =============================================================================\n\n/**\n * Convert ISO alpha-2 code to flag emoji\n * @example getFlagEmoji('AE') => 'ðŸ‡¦ðŸ‡ª'\n */\nexport function getFlagEmoji(countryCode: string): string {\n  const codePoints = countryCode\n    .toUpperCase()\n    .split('')\n    .map((char) => 127397 + char.charCodeAt(0));\n  return String.fromCodePoint(...codePoints);\n}\n"],"names":["jobCategoriesApi","params","query","filter","apiClient","id","code","countriesApi","jobCategoryKeys","countryKeys","STALE_TIME","useJobCategoryRefs","useQuery","useCountryRefs","useCommonNationalities","getFlagEmoji","countryCode","codePoints","char"],"mappings":"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"}