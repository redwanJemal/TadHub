import{c as x,b as p,u as y,r as m,j as e,d as j,K as N,e as v}from"./index-Dh87D1Ms.js";/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],k=x("activity",w);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],M=x("circle-alert",A);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],D=x("clock",B);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],T=x("hard-drive",S);function f(s){if(s===0)return"0 B";const i=1024,d=["B","KB","MB","GB","TB"],a=Math.floor(Math.log(s)/Math.log(i));return parseFloat((s/Math.pow(i,a)).toFixed(1))+" "+d[a]}function _(s){const i=new Date(s),a=new Date().getTime()-i.getTime(),o=Math.floor(a/6e4),n=Math.floor(a/36e5),l=Math.floor(a/864e5);return o<1?"Just now":o<60?`${o}m ago`:n<24?`${n}h ago`:l<7?`${l}d ago`:i.toLocaleDateString()}function $(){var u,h;const{t:s}=p("dashboard"),d=((h=(u=y().user)==null?void 0:u.profile)==null?void 0:h.given_name)||"User",[a,o]=m.useState(!0),[n,l]=m.useState(null),[r,b]=m.useState(null);if(m.useEffect(()=>{async function t(){try{o(!0);const c=await v.get("/bff/tenant/dashboard");b(c),l(null)}catch(c){console.error("Failed to fetch dashboard:",c),l("Failed to load dashboard data")}finally{o(!1)}}t()},[]),a)return e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})});if(n||!r)return e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px] text-muted-foreground",children:[e.jsx(M,{className:"h-12 w-12 mb-4"}),e.jsx("p",{children:n||"No data available"}),e.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90",children:"Retry"})]});const g=[{label:s("stats.teamMembers"),value:r.members.total.toString(),icon:j},{label:s("stats.activeUsers"),value:r.members.active.toString(),icon:k},{label:s("stats.apiKeys"),value:r.metrics.totalApiKeys.toString(),icon:N},{label:s("stats.storage"),value:f(r.metrics.storageUsedBytes),icon:T,subtitle:`/ ${f(r.metrics.storageLimitBytes)}`}];return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-foreground",children:s("welcome",{name:d})}),e.jsx("p",{className:"text-muted-foreground mt-1",children:s("overview")})]}),r.subscription.isTrialActive&&r.subscription.trialDaysRemaining!==null&&e.jsxs("div",{className:"rounded-xl bg-amber-500/10 border border-amber-500/20 p-4 flex items-center gap-3",children:[e.jsx(D,{className:"h-5 w-5 text-amber-500"}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-foreground",children:["Trial ends in ",r.subscription.trialDaysRemaining," days"]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Upgrade to ",r.subscription.planName," to keep all features"]})]})]}),e.jsx("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-4",children:g.map(t=>e.jsxs("div",{className:"rounded-xl bg-card border border-border p-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx(t.icon,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-2xl font-bold text-foreground",children:t.value}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[t.label,"subtitle"in t&&e.jsxs("span",{className:"opacity-60",children:[" ",t.subtitle]})]})]})]},t.label))}),e.jsxs("div",{className:"rounded-xl bg-card border border-border p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-foreground mb-4",children:s("quickActions")}),e.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:Object.entries({inviteTeam:s("actions.inviteTeam"),createApiKey:s("actions.createApiKey"),viewSettings:s("actions.viewSettings"),viewBilling:s("actions.viewBilling")}).map(([t,c])=>e.jsx("button",{className:"rounded-lg border border-border p-4 text-left hover:bg-accent transition-colors",children:e.jsx("p",{className:"font-medium text-foreground",children:c})},t))})]}),e.jsxs("div",{className:"rounded-xl bg-card border border-border p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-foreground mb-4",children:s("recentActivity")}),r.recentActivity.length===0?e.jsx("p",{className:"text-muted-foreground",children:s("activity.noActivity")}):e.jsx("div",{className:"space-y-4",children:r.recentActivity.slice(0,5).map(t=>e.jsxs("div",{className:"flex items-start justify-between gap-4 py-3 border-b border-border last:border-0",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-foreground",children:[e.jsx("span",{className:"font-medium",children:t.actorName||"System"})," ",t.action.toLowerCase()," ",t.entityName&&e.jsx("span",{className:"text-primary",children:t.entityName})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.entityType})]}),e.jsx("p",{className:"text-sm text-muted-foreground whitespace-nowrap",children:_(t.timestamp)})]},t.id))})]})]})}export{$ as DashboardPage};
//# sourceMappingURL=DashboardPage-CwEEZ9vC.js.map
