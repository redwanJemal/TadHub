import{c as S,h as w,l as I,m as E,n as A,o as K,d as P,r as x,j as e,L as j,B as L,z as _,a as B,S as G,K as H}from"./index-3LWobmh4.js";import{T as M,a as U,b as v,c as N}from"./tabs-CAZbEoeM.js";import{C as u,a as f,b as g,d as q,c as V}from"./card-zP3Z4qZO.js";import{C as y,S as $,b as Q,c as z,d as D,e as b,I as r}from"./select-DSHg5FKg.js";import{L as c,B as C}from"./label-C6xqjT5A.js";import{M as O}from"./mail-D_lj3mZN.js";/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],Y=S("message-circle",R);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],J=S("send",Z);function T(s){return`/tenants/${I()}${s}`}function W(){return w.get(T("/settings/notifications"))}function X(s){return w.put(T("/settings/notifications"),s)}const k="notification-settings";function ee(){return E({queryKey:[k],queryFn:()=>W()})}function se(){const s=A();return K({mutationFn:l=>X(l),onSuccess:()=>{s.invalidateQueries({queryKey:[k]})}})}const m={email:{enabled:!1,provider:"smtp",smtpHost:"",smtpPort:587,smtpUsername:"",smtpPassword:"",useSsl:!0,sendGridApiKey:"",fromEmail:"",fromName:""},whatsapp:{enabled:!1},telegram:{enabled:!1},eventPreferences:{}};function ae(){const{t:s}=P("settings"),{data:l,isLoading:d}=ee(),o=se(),[t,n]=x.useState(m),[h,p]=x.useState(null);x.useEffect(()=>{l&&n({...m,...l,email:{...m.email,...l.email},whatsapp:{...m.whatsapp,...l.whatsapp},telegram:{...m.telegram,...l.telegram}})},[l]);const F=async()=>{p(null);try{await o.mutateAsync(t),p({type:"success",message:s("notifications.saveSuccess")})}catch{p({type:"error",message:s("notifications.saveError")})}};return d?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(j,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium",children:s("notifications.title")}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s("notifications.description")})]}),e.jsxs(u,{children:[e.jsx(f,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-blue-500/10",children:e.jsx(O,{className:"h-5 w-5 text-blue-500"})}),e.jsxs("div",{children:[e.jsx(g,{className:"text-base",children:s("notifications.email.title")}),e.jsx(q,{children:s("notifications.email.description")})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y,{id:"email-enabled",checked:t.email.enabled,onCheckedChange:i=>n(a=>({...a,email:{...a.email,enabled:i===!0}}))}),e.jsx(c,{htmlFor:"email-enabled",className:"text-sm",children:s("notifications.email.enabled")})]})]})}),t.email.enabled&&e.jsxs(V,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:s("notifications.email.provider")}),e.jsxs($,{value:t.email.provider,onValueChange:i=>n(a=>({...a,email:{...a.email,provider:i}})),children:[e.jsx(Q,{className:"w-48",children:e.jsx(z,{})}),e.jsxs(D,{children:[e.jsx(b,{value:"smtp",children:s("notifications.email.smtp")}),e.jsx(b,{value:"sendgrid",children:s("notifications.email.sendgrid")})]})]})]}),t.email.provider==="smtp"&&e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"smtp-host",children:s("notifications.email.smtpHost")}),e.jsx(r,{id:"smtp-host",value:t.email.smtpHost??"",onChange:i=>n(a=>({...a,email:{...a.email,smtpHost:i.target.value}})),placeholder:s("notifications.email.smtpHostPlaceholder")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"smtp-port",children:s("notifications.email.smtpPort")}),e.jsx(r,{id:"smtp-port",type:"number",value:t.email.smtpPort,onChange:i=>n(a=>({...a,email:{...a.email,smtpPort:parseInt(i.target.value)||587}}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"smtp-username",children:s("notifications.email.smtpUsername")}),e.jsx(r,{id:"smtp-username",value:t.email.smtpUsername??"",onChange:i=>n(a=>({...a,email:{...a.email,smtpUsername:i.target.value}})),placeholder:s("notifications.email.smtpUsernamePlaceholder")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"smtp-password",children:s("notifications.email.smtpPassword")}),e.jsx(r,{id:"smtp-password",type:"password",value:t.email.smtpPassword??"",onChange:i=>n(a=>({...a,email:{...a.email,smtpPassword:i.target.value}}))})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:col-span-2",children:[e.jsx(y,{id:"smtp-ssl",checked:t.email.useSsl,onCheckedChange:i=>n(a=>({...a,email:{...a.email,useSsl:i===!0}}))}),e.jsx(c,{htmlFor:"smtp-ssl",children:s("notifications.email.useSsl")})]})]}),t.email.provider==="sendgrid"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"sendgrid-key",children:s("notifications.email.sendGridApiKey")}),e.jsx(r,{id:"sendgrid-key",type:"password",value:t.email.sendGridApiKey??"",onChange:i=>n(a=>({...a,email:{...a.email,sendGridApiKey:i.target.value}})),placeholder:s("notifications.email.sendGridApiKeyPlaceholder")})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"from-email",children:s("notifications.email.fromEmail")}),e.jsx(r,{id:"from-email",type:"email",value:t.email.fromEmail??"",onChange:i=>n(a=>({...a,email:{...a.email,fromEmail:i.target.value}})),placeholder:s("notifications.email.fromEmailPlaceholder")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"from-name",children:s("notifications.email.fromName")}),e.jsx(r,{id:"from-name",value:t.email.fromName??"",onChange:i=>n(a=>({...a,email:{...a.email,fromName:i.target.value}})),placeholder:s("notifications.email.fromNamePlaceholder")})]})]})]})]}),e.jsx(u,{className:"opacity-60",children:e.jsx(f,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-green-500/10",children:e.jsx(Y,{className:"h-5 w-5 text-green-500"})}),e.jsx("div",{children:e.jsx(g,{className:"text-base",children:s("notifications.whatsapp.title")})})]}),e.jsx(C,{variant:"secondary",children:s("notifications.whatsapp.comingSoon")})]})})}),e.jsx(u,{className:"opacity-60",children:e.jsx(f,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-sky-500/10",children:e.jsx(J,{className:"h-5 w-5 text-sky-500"})}),e.jsx("div",{children:e.jsx(g,{className:"text-base",children:s("notifications.telegram.title")})})]}),e.jsx(C,{variant:"secondary",children:s("notifications.telegram.comingSoon")})]})})}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(L,{onClick:F,disabled:o.isPending,children:[o.isPending&&e.jsx(j,{className:"me-2 h-4 w-4 animate-spin"}),o.isPending?s("notifications.saving"):s("notifications.save")]}),h&&e.jsx("p",{className:h.type==="success"?"text-sm text-green-600":"text-sm text-destructive",children:h.message})]})]})}const ie=["general","notifications"];function me(){const{t:s}=P("settings"),{tab:l}=_(),d=B(),o=ie.includes(l)?l:"notifications",t=n=>{d(`/settings/${n}`,{replace:!0})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:s("title")}),e.jsx("p",{className:"text-muted-foreground",children:s("description")})]}),e.jsxs(M,{value:o,onValueChange:t,children:[e.jsxs(U,{children:[e.jsxs(v,{value:"general",children:[e.jsx(G,{className:"me-2 h-4 w-4"}),s("tabs.general")]}),e.jsxs(v,{value:"notifications",children:[e.jsx(H,{className:"me-2 h-4 w-4"}),s("tabs.notifications")]})]}),e.jsx(N,{value:"general",children:e.jsx("div",{className:"rounded-lg border bg-card p-8 text-center text-muted-foreground",children:s("general.placeholder")})}),e.jsx(N,{value:"notifications",children:e.jsx(ae,{})})]})]})}export{me as SettingsPage};
//# sourceMappingURL=index-Doyiocdd.js.map
