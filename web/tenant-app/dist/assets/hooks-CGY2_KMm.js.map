{"version":3,"file":"hooks-CGY2_KMm.js","sources":["../../src/features/clients/api.ts","../../src/features/clients/hooks.ts"],"sourcesContent":["import { apiClient } from '@/shared/api/client';\nimport { getTenantId } from '@/features/auth/AuthProvider';\nimport type { QueryParams } from '@/shared/api/types/common';\nimport type {\n  ClientDto,\n  ClientListDto,\n  CreateClientRequest,\n  UpdateClientRequest,\n} from './types';\n\nfunction tenantPath(path: string) {\n  const tenantId = getTenantId();\n  return `/tenants/${tenantId}${path}`;\n}\n\nexport function listClients(params?: QueryParams) {\n  return apiClient.getPaged<ClientListDto>(tenantPath('/clients'), params);\n}\n\nexport function getClient(id: string) {\n  return apiClient.get<ClientDto>(tenantPath(`/clients/${id}`));\n}\n\nexport function createClient(data: CreateClientRequest) {\n  return apiClient.post<ClientDto>(tenantPath('/clients'), data);\n}\n\nexport function updateClient(id: string, data: UpdateClientRequest) {\n  return apiClient.patch<ClientDto>(tenantPath(`/clients/${id}`), data);\n}\n\nexport function deleteClient(id: string) {\n  return apiClient.delete<void>(tenantPath(`/clients/${id}`));\n}\n","import { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport type { QueryParams } from '@/shared/api/types/common';\nimport * as api from './api';\nimport type { CreateClientRequest, UpdateClientRequest } from './types';\n\nconst CLIENTS_KEY = 'clients';\n\nexport function useClients(params?: QueryParams) {\n  return useQuery({\n    queryKey: [CLIENTS_KEY, params],\n    queryFn: () => api.listClients(params),\n  });\n}\n\nexport function useClient(id: string) {\n  return useQuery({\n    queryKey: [CLIENTS_KEY, id],\n    queryFn: () => api.getClient(id),\n    enabled: !!id,\n  });\n}\n\nexport function useCreateClient() {\n  const queryClient = useQueryClient();\n  return useMutation({\n    mutationFn: (data: CreateClientRequest) => api.createClient(data),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [CLIENTS_KEY] });\n    },\n  });\n}\n\nexport function useUpdateClient() {\n  const queryClient = useQueryClient();\n  return useMutation({\n    mutationFn: ({ id, data }: { id: string; data: UpdateClientRequest }) =>\n      api.updateClient(id, data),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [CLIENTS_KEY] });\n    },\n  });\n}\n\nexport function useDeleteClient() {\n  const queryClient = useQueryClient();\n  return useMutation({\n    mutationFn: (id: string) => api.deleteClient(id),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [CLIENTS_KEY] });\n    },\n  });\n}\n"],"names":["tenantPath","path","getTenantId","listClients","params","apiClient","createClient","data","updateClient","id","deleteClient","CLIENTS_KEY","useClients","useQuery","api.listClients","useCreateClient","queryClient","useQueryClient","useMutation","api.createClient","useUpdateClient","api.updateClient","useDeleteClient","api.deleteClient"],"mappings":"oEAUA,SAASA,EAAWC,EAAc,CAEhC,MAAO,YADUC,EAAA,CACU,GAAGD,CAAI,EACpC,CAEO,SAASE,EAAYC,EAAsB,CAChD,OAAOC,EAAU,SAAwBL,EAAW,UAAU,EAAGI,CAAM,CACzE,CAMO,SAASE,EAAaC,EAA2B,CACtD,OAAOF,EAAU,KAAgBL,EAAW,UAAU,EAAGO,CAAI,CAC/D,CAEO,SAASC,EAAaC,EAAYF,EAA2B,CAClE,OAAOF,EAAU,MAAiBL,EAAW,YAAYS,CAAE,EAAE,EAAGF,CAAI,CACtE,CAEO,SAASG,EAAaD,EAAY,CACvC,OAAOJ,EAAU,OAAaL,EAAW,YAAYS,CAAE,EAAE,CAAC,CAC5D,CC5BA,MAAME,EAAc,UAEb,SAASC,EAAWR,EAAsB,CAC/C,OAAOS,EAAS,CACd,SAAU,CAACF,EAAaP,CAAM,EAC9B,QAAS,IAAMU,EAAgBV,CAAM,CAAA,CACtC,CACH,CAUO,SAASW,GAAkB,CAChC,MAAMC,EAAcC,EAAA,EACpB,OAAOC,EAAY,CACjB,WAAaX,GAA8BY,EAAiBZ,CAAI,EAChE,UAAW,IAAM,CACfS,EAAY,kBAAkB,CAAE,SAAU,CAACL,CAAW,EAAG,CAC3D,CAAA,CACD,CACH,CAEO,SAASS,GAAkB,CAChC,MAAMJ,EAAcC,EAAA,EACpB,OAAOC,EAAY,CACjB,WAAY,CAAC,CAAE,GAAAT,EAAI,KAAAF,KACjBc,EAAiBZ,EAAIF,CAAI,EAC3B,UAAW,IAAM,CACfS,EAAY,kBAAkB,CAAE,SAAU,CAACL,CAAW,EAAG,CAC3D,CAAA,CACD,CACH,CAEO,SAASW,GAAkB,CAChC,MAAMN,EAAcC,EAAA,EACpB,OAAOC,EAAY,CACjB,WAAaT,GAAec,EAAiBd,CAAE,EAC/C,UAAW,IAAM,CACfO,EAAY,kBAAkB,CAAE,SAAU,CAACL,CAAW,EAAG,CAC3D,CAAA,CACD,CACH"}