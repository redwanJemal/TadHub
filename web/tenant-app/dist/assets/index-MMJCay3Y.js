import{c as v,h as b,l as w,m as y,a as j,j as e,d,a3 as p,p as C,U as g,B as A,f as k,T as S}from"./index-3LWobmh4.js";import{C as m,a as x,b as h,c as u}from"./card-zP3Z4qZO.js";import{S as o}from"./skeleton-CkBj2wMt.js";import{U as $}from"./user-plus-B4EfnQJR.js";import{F as N}from"./file-text-Y4nid_gy.js";import{U as T}from"./user-check-CwWcRwPd.js";/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],q=v("activity",D);function M(t){return`/tenants/${w()}${t}`}function R(){return b.get(M("/dashboard"))}const U="dashboard";function F(){return y({queryKey:[U],queryFn:()=>R(),staleTime:300*1e3})}function l({title:t,value:n,subtitle:a,icon:s,href:i,className:c,isLoading:r}){const f=j();return e.jsxs(m,{className:"cursor-pointer transition-colors hover:bg-accent/50",onClick:()=>f(i),children:[e.jsxs(x,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(h,{className:"text-sm font-medium",children:t}),e.jsx(s,{className:`h-4 w-4 ${c??"text-muted-foreground"}`})]}),e.jsx(u,{children:r?e.jsx(o,{className:"h-8 w-16"}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`text-2xl font-bold ${c??""}`,children:n}),a&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:a})]})})]})}function L(t,n){const a=Date.now(),s=new Date(t).getTime(),i=a-s,c=Math.floor(i/6e4),r=Math.floor(i/36e5),f=Math.floor(i/864e5);return c<1?n("time.justNow"):c<60?n("time.minutesAgo",{count:c}):r<24?n("time.hoursAgo",{count:r}):n("time.daysAgo",{count:f})}function P(t){return t.replace(/([a-z])([A-Z])/g,"$1 $2")}function B({items:t,isLoading:n}){const{t:a}=d("dashboard");return e.jsxs(m,{className:"lg:col-span-2",children:[e.jsx(x,{children:e.jsxs(h,{className:"flex items-center gap-2",children:[e.jsx(q,{className:"h-5 w-5"}),a("activity.title")]})}),e.jsx(u,{children:n?e.jsx("div",{className:"space-y-4",children:Array.from({length:5}).map((s,i)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(o,{className:"h-2 w-2 rounded-full"}),e.jsx(o,{className:"h-4 flex-1"}),e.jsx(o,{className:"h-4 w-16"})]},i))}):t.length===0?e.jsx("p",{className:"text-sm text-muted-foreground",children:a("activity.empty")}):e.jsx("div",{className:"space-y-3",children:t.map(s=>e.jsxs("div",{className:"flex items-start justify-between gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-start gap-3 min-w-0",children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-primary mt-1.5 shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("span",{className:"font-medium",children:P(s.eventName)}),s.entityName&&e.jsxs("span",{className:"text-muted-foreground",children:[" â€” ",s.entityName]})]})]}),e.jsx("span",{className:"text-muted-foreground text-xs whitespace-nowrap shrink-0",children:L(s.createdAt,a)})]},s.id))})})]})}function H({compliance:t,isLoading:n}){const{t:a}=d("dashboard"),s=j();return e.jsxs(m,{className:"cursor-pointer transition-colors hover:bg-accent/50",onClick:()=>s("/compliance"),children:[e.jsx(x,{children:e.jsxs(h,{className:"flex items-center gap-2",children:[e.jsx(p,{className:"h-5 w-5"}),a("compliance.title")]})}),e.jsx(u,{children:n||!t?e.jsxs("div",{className:"space-y-3",children:[e.jsx(o,{className:"h-8 w-20"}),e.jsx(o,{className:"h-4 w-full"})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"text-2xl font-bold",children:[t.complianceRate,"%",e.jsx("span",{className:"text-sm font-normal text-muted-foreground ms-1",children:a("compliance.valid").toLowerCase()})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-emerald-600 font-medium",children:t.valid}),e.jsx("span",{className:"text-muted-foreground ms-1",children:a("compliance.valid")})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-amber-600 font-medium",children:t.expiringSoon}),e.jsx("span",{className:"text-muted-foreground ms-1",children:a("compliance.expiringSoon")})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-destructive font-medium",children:t.expired}),e.jsx("span",{className:"text-muted-foreground ms-1",children:a("compliance.expired")})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground font-medium",children:t.pending}),e.jsx("span",{className:"text-muted-foreground ms-1",children:a("compliance.pending")})]})]})]})})]})}function I(){const{t}=d("dashboard"),n=j(),{hasPermission:a,isLoaded:s}=C(),i=[{label:t("quickActions.addCandidate"),icon:$,href:"/candidates/new",permission:"candidates.create"},{label:t("quickActions.newContract"),icon:N,href:"/contracts/new",permission:"contracts.create"},{label:t("quickActions.compliance"),icon:p,href:"/compliance",permission:"documents.view"},{label:t("quickActions.workers"),icon:g,href:"/workers",permission:"workers.view"}],c=s?i.filter(r=>a(r.permission)):i;return c.length===0?null:e.jsxs(m,{children:[e.jsx(x,{children:e.jsx(h,{children:t("quickActions.title")})}),e.jsx(u,{children:e.jsx("div",{className:"grid grid-cols-2 gap-2",children:c.map(r=>e.jsxs(A,{variant:"outline",className:"h-auto flex-col gap-1 py-3",onClick:()=>n(r.href),children:[e.jsx(r.icon,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs",children:r.label})]},r.href))})})]})}function O(){const{t}=d("dashboard"),{data:n,isLoading:a}=F(),s=n==null?void 0:n.kpis,i=n==null?void 0:n.compliance;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:t("title")}),e.jsx("p",{className:"text-muted-foreground",children:t("description")})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6",children:[e.jsx(l,{title:t("kpi.activeWorkers"),value:(s==null?void 0:s.activeWorkers)??0,subtitle:`/ ${(s==null?void 0:s.totalWorkers)??0}`,icon:g,href:"/workers",isLoading:a}),e.jsx(l,{title:t("kpi.activeContracts"),value:(s==null?void 0:s.activeContracts)??0,subtitle:`/ ${(s==null?void 0:s.totalContracts)??0}`,icon:N,href:"/contracts",isLoading:a}),e.jsx(l,{title:t("kpi.pendingCandidates"),value:(s==null?void 0:s.pendingCandidates)??0,subtitle:`/ ${(s==null?void 0:s.totalCandidates)??0}`,icon:T,href:"/candidates",className:"text-amber-600",isLoading:a}),e.jsx(l,{title:t("kpi.totalClients"),value:(s==null?void 0:s.activeClients)??0,subtitle:`/ ${(s==null?void 0:s.totalClients)??0}`,icon:k,href:"/clients",isLoading:a}),e.jsx(l,{title:t("kpi.complianceRate"),value:(i==null?void 0:i.complianceRate)??0,subtitle:"%",icon:p,href:"/compliance",className:"text-emerald-600",isLoading:a}),e.jsx(l,{title:t("kpi.expiringSoon"),value:(i==null?void 0:i.expiringSoon)??0,icon:S,href:"/compliance",className:"text-amber-600",isLoading:a})]}),e.jsxs("div",{className:"grid gap-4 lg:grid-cols-3",children:[e.jsx(B,{items:(n==null?void 0:n.recentActivity)??[],isLoading:a}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(H,{compliance:i,isLoading:a}),e.jsx(I,{})]})]})]})}export{O as DashboardPage};
//# sourceMappingURL=index-MMJCay3Y.js.map
